"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[2724],{28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var d=s(96540);const r={},i=d.createContext(r);function c(e){const n=d.useContext(i);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),d.createElement(i.Provider,{value:n},e.children)}},64945:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"http/endpoint","title":"endpoint","description":"endpoint \u2014 \u044d\u0442\u043e \u0441\u0430\u043c\u044b\u0439 \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u044b\u0439 ASGI-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0432 lihil, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442, \u043a\u0430\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u0441 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u043c, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u043c Route.","source":"@site/i18n/ru/docusaurus-plugin-content-docs/current/http/endpoint.md","sourceDirName":"http","slug":"/http/endpoint","permalink":"/ru/docs/http/endpoint","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1.1,"frontMatter":{"sidebar_position":1.1,"title":"endpoint"},"sidebar":"tutorialSidebar","previous":{"title":"\u0444\u043e\u0440\u043c\u0430","permalink":"/ru/docs/http/request/from-data"},"next":{"title":"\u043c\u0430\u0440\u0448\u0440\u0443\u0442","permalink":"/ru/docs/http/route"}}');var r=s(74848),i=s(28453);const c={sidebar_position:1.1,title:"endpoint"},l="endpoint",t={},o=[{value:"\u041f\u0430\u0440\u0441\u0438\u043d\u0433 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",id:"\u043f\u0430\u0440\u0441\u0438\u043d\u0433-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",level:3},{value:"\u042f\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",id:"\u044f\u0432\u043d\u043e\u0435-\u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",level:3},{value:"\u041d\u0435\u044f\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",id:"\u043d\u0435\u044f\u0432\u043d\u043e\u0435-\u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",level:4},{value:"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445",id:"\u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f-\u0434\u0430\u043d\u043d\u044b\u0445",level:3},{value:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",id:"\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",level:3},{value:"\u041c\u0435\u0442\u043a\u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",id:"\u043c\u0435\u0442\u043a\u0438-\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",level:3},{value:"\u041e\u0442\u0432\u0435\u0442 \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434\u043e\u043c",id:"\u043e\u0442\u0432\u0435\u0442-\u0441\u043e-\u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434\u043e\u043c",level:4},{value:"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439",id:"\u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435-\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445-\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439",level:4},{value:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a/\u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a",id:"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439-\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a",level:4},{value:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430",id:"\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",level:3},{value:"\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 endpoint&#39;\u0430",id:"\u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435-\u0441\u0432\u043e\u0439\u0441\u0442\u0432-endpoint\u0430",level:3},{value:"\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e endpoint&#39;\u0430 \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435:",id:"\u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435-\u0441\u0432\u043e\u0439\u0441\u0442\u0432-\u0434\u043b\u044f-\u043a\u0430\u0436\u0434\u043e\u0433\u043e-endpoint\u0430-\u0432-\u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"endpoint",children:"endpoint"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"endpoint"})," \u2014 \u044d\u0442\u043e \u0441\u0430\u043c\u044b\u0439 \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u044b\u0439 ASGI-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0432 ",(0,r.jsx)(n.code,{children:"lihil"}),", \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442, \u043a\u0430\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u0441 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u043c, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u043c ",(0,r.jsx)(n.code,{children:"Route"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"\u043f\u0430\u0440\u0441\u0438\u043d\u0433-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",children:"\u041f\u0430\u0440\u0441\u0438\u043d\u0433 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from lihil import Route\nfrom ididi import NodeConfig\nfrom typing import Annotated, NewType\nfrom sqlalchemy.ext.asyncio import AsyncConnection, AsyncEngine\n\n\nasync def get_conn(engine: AsyncEngine) -> AsyncConnection:\n    async with engine.begin() as conn:\n        yield conn\n\nUserID = NewType("UserID", str)\n\ndef user_id_factory() -> UserID:\n    return UserID(str(uuid4()))\n\nuser_route = Route("/users", deps=[get_conn, (user_id_factory, NodeConfig(reuse=False))])\n\n@user_route.post\nasync def create_user(\n    user: UserData, user_id: UserID, conn: AsyncConnection\n) -> Annotated[UserDB, stauts.Created]:\n\n    sql = user_sql(user=user, id_=user_id)\n    await conn.execute(sql)\n    return UserDB.from_user(user, id=user_id)\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u0417\u0434\u0435\u0441\u044c:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_id"})," \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e ",(0,r.jsx)(n.code,{children:"user_id_factory"})," \u0438 \u0432\u0435\u0440\u043d\u0435\u0442 uuid \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u0438."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conn"})," \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e ",(0,r.jsx)(n.code,{children:"get_conn"})," \u0438 \u0432\u0435\u0440\u043d\u0435\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 ",(0,r.jsx)(n.code,{children:"AsyncConnection"}),", \u0433\u0434\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043e \u0434\u0432\u0438\u0436\u043a\u0443 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UserDB"})," \u0431\u0443\u0434\u0435\u0442 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u0432 JSON \u0438 \u0432\u0435\u0440\u043d\u0435\u0442 \u043e\u0442\u0432\u0435\u0442 \u0441 content-type ",(0,r.jsx)(n.code,{children:"application/json"})," \u0438 \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434\u043e\u043c ",(0,r.jsx)(n.code,{children:"201"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u044f\u0432\u043d\u043e\u0435-\u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",children:"\u042f\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),"\n",(0,r.jsxs)(n.p,{children:["\u042f\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e ",(0,r.jsx)(n.code,{children:"Param"})," \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 Lihil \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u043a\u0430\u043a \u0435\u0441\u0442\u044c, \u0431\u0435\u0437 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0433\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0430."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u041f\u0440\u0438\u043c\u0435\u0440"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'async def login(cred: Annotated[str, Param("header", alias="User-Credentials")], x_access_token: Annotated[str, Param("header")]) : ...\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u0417\u0434\u0435\u0441\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 ",(0,r.jsx)(n.code,{children:"cred"})," \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441 \u043a\u043b\u044e\u0447\u043e\u043c ",(0,r.jsx)(n.code,{children:"User-Credentials"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u0415\u0441\u043b\u0438 \u043a\u043b\u044e\u0447 \u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f kebab case \u0438\u043c\u0435\u043d\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0434\u0435\u0441\u044c ",(0,r.jsx)(n.code,{children:"x_access_token"})," \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441 \u043a\u043b\u044e\u0447\u043e\u043c ",(0,r.jsx)(n.code,{children:"x-access-token"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u043d\u0435\u044f\u0432\u043d\u043e\u0435-\u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",children:"\u041d\u0435\u044f\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"}),"\n",(0,r.jsx)(n.p,{children:"\u0415\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043d\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d \u0441 \u043a\u0430\u043a\u043e\u0439-\u043b\u0438\u0431\u043e \u043c\u0435\u0442\u043a\u043e\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430, \u0434\u043b\u044f \u0435\u0433\u043e \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u0415\u0441\u043b\u0438 \u0438\u043c\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 \u043f\u0443\u0442\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u043e\u043d\u043e \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043f\u0443\u0442\u0438."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u0415\u0441\u043b\u0438 \u0442\u0438\u043f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u043e\u043c ",(0,r.jsx)(n.code,{children:"msgspec.Struct"}),", \u043e\u043d \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0442\u0435\u043b\u0430."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u0415\u0441\u043b\u0438 \u0442\u0438\u043f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0433\u0440\u0430\u0444\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0438\u043b\u0438 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043c\u0438\u0442\u0438\u0432\u043d\u044b\u043c \u0442\u0438\u043f\u043e\u043c lihil, \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u043a\u0430\u043a \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u0438 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d lihil"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043d \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart TD\n    A[\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0431\u0435\u0437 \u043c\u0435\u0442\u043a\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430] --\x3e B[\u0415\u0441\u0442\u044c \u043b\u0438 \u0438\u043c\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0432 \u043f\u0443\u0442\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430?]\n    B -- \u0414\u0430 --\x3e P[\u0418\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043f\u0443\u0442\u0438]\n    B -- \u041d\u0435\u0442 --\x3e C[\u042f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438 \u0442\u0438\u043f \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u043e\u043c Struct?]\n    C -- \u0414\u0430 --\x3e R[\u0418\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0442\u0435\u043b\u0430]\n    C -- \u041d\u0435\u0442 --\x3e D[\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u043b\u0438 \u0442\u0438\u043f \u0432 \u0433\u0440\u0430\u0444\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0438\u043b\u0438 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043c\u0438\u0442\u0438\u0432\u043d\u044b\u043c \u0442\u0438\u043f\u043e\u043c lihil?]\n    D -- \u0414\u0430 --\x3e S[\u0418\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c]\n    D -- \u041d\u0435\u0442 --\x3e Q[\u0418\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430]"}),"\n",(0,r.jsx)(n.p,{children:"\u041f\u0440\u0438\u043c\u0435\u0440:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from typing import Annotated\nfrom lihil import Route, Payload\n\nuser_route = Route("/users/{user_id}", deps=[Cache, Engine])\n\nclass UserUpdate(Payload): ...\nclass Engine: ...\nclass Cache: ...\n\n\n@user_route.put\nasync def update_user(user_id: str, engine: Engine, cache: Cache):\n    return "ok"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u0412 \u044d\u0442\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_id"})," \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 \u043f\u0443\u0442\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u044d\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043f\u0443\u0442\u0438"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"engine"})," \u0430\u043d\u043d\u043e\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u043c\u0435\u0442\u043a\u043e\u0439 ",(0,r.jsx)(n.code,{children:"Use"}),", \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u044d\u0442\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cache"})," \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 user_route, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u044d\u0442\u043e \u0442\u0430\u043a\u0436\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u0422\u043e\u043b\u044c\u043a\u043e ",(0,r.jsx)(n.code,{children:"user_id"})," \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c, \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e lihil."]}),"\n",(0,r.jsxs)(n.p,{children:["\u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043d\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d, ",(0,r.jsx)(n.code,{children:'"ok"'})," \u0431\u0443\u0434\u0435\u0442 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043a\u0430\u043a json ",(0,r.jsx)(n.code,{children:"'\"ok\"'"}),", \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434 \u0431\u0443\u0434\u0435\u0442 ",(0,r.jsx)(n.code,{children:"200"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"\u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f-\u0434\u0430\u043d\u043d\u044b\u0445",children:"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"}),"\n",(0,r.jsx)(n.p,{children:"lihil \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043a\u043e\u0440\u043e\u0431\u043a\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f msgspec."}),"\n",(0,r.jsx)(n.h3,{id:"\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",children:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c ",(0,r.jsx)(n.code,{children:"typing.Annotated"})," \u0438 ",(0,r.jsx)(n.code,{children:"Param"})," \u0434\u043b\u044f \u043d\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043d\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from lihil import Param\nall_users = Route("/users")\n\n@all_users.get\nasync def get_users(numers: Annotated[int, Param(gt=0)]):\n    ...\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u0417\u0434\u0435\u0441\u044c ",(0,r.jsx)(n.code,{children:"get_user"})," \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 ",(0,r.jsx)(n.code,{children:"numers"}),", \u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 ",(0,r.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0441\u043e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from typing import Annotated\n\nfrom lihil import Payload, Param\n\nUnixName = Annotated[\n    str, Param(min_length=1, max_length=32, pattern="^[a-z_][a-z0-9_-]*$")\n]\n\nclass User(Payload):\n    name: UnixName\n    groups: Annotated[set[UnixName], Param(max_length=16)] = set()\n    cpu_limit: Annotated[float, Param(ge=0.1, le=8)] = 1\n    mem_limit: Annotated[int, Param(ge=256, le=8192)] = 1024\n\n@all_users.post\nasync def create_user(user: User): ...\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u0417\u0434\u0435\u0441\u044c ",(0,r.jsx)(n.code,{children:"create_user"})," \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0442\u0435\u043b\u0430 ",(0,r.jsx)(n.code,{children:"user"}),", \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0433\u0434\u0435 \u043a\u0430\u0436\u0434\u043e\u0435 \u043f\u043e\u043b\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u043c\u0438 \u0442\u0438\u043f\u0430\u043c\u0438"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u041e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441 ",(0,r.jsx)(n.a,{href:"https://jcristharif.com/msgspec/constraints.html",children:"\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c\u0438 msgspec"})," \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432."]}),"\n",(0,r.jsx)(n.h3,{id:"\u043c\u0435\u0442\u043a\u0438-\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",children:"\u041c\u0435\u0442\u043a\u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"}),"\n",(0,r.jsxs)(n.p,{children:["\u0427\u0430\u0441\u0442\u043e \u0432\u044b \u0445\u043e\u0442\u0435\u043b\u0438 \u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434 \u0438\u043b\u0438 \u0442\u0438\u043f \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0432\u0430\u0448\u0435\u0433\u043e endpoint'\u0430. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u043d\u0443 \u0438\u043b\u0438 \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 ",(0,r.jsx)(n.code,{children:"\u043c\u0435\u0442\u043e\u043a \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"}),". \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from lihil import Annotated, status\n\nasync def create_user(user: UserData, engine: Engine) -> Annotated[UserDB, status.Created]:\n    ...\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u0422\u0435\u043f\u0435\u0440\u044c ",(0,r.jsx)(n.code,{children:"create_user"})," \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434 ",(0,r.jsx)(n.code,{children:"201"})," \u0432\u043c\u0435\u0441\u0442\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0433\u043e ",(0,r.jsx)(n.code,{children:"200"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0442\u043e\u043a \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u041c\u0435\u0442\u043a\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"}),(0,r.jsx)(n.th,{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),(0,r.jsx)(n.th,{children:"\u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442(\u044b) \u0442\u0438\u043f\u0430"}),(0,r.jsx)(n.th,{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f"}),(0,r.jsx)(n.th,{children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Json[T]"})}),(0,r.jsxs)(n.td,{children:["\u041e\u0442\u0432\u0435\u0442 \u0441 \u0442\u0438\u043f\u043e\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e ",(0,r.jsx)(n.code,{children:"application/json"})]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"T"}),": \u0442\u0438\u043f \u0442\u0435\u043b\u0430 \u043e\u0442\u0432\u0435\u0442\u0430"]}),(0,r.jsx)(n.td,{children:"\u0422\u0438\u043f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Json[list[int]]"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Stream[T]"})}),(0,r.jsxs)(n.td,{children:["Server-sent events \u0441 \u0442\u0438\u043f\u043e\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e ",(0,r.jsx)(n.code,{children:"text/event-stream"})]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"T"}),": \u0442\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"]}),(0,r.jsx)(n.td,{children:"\u0414\u043b\u044f \u043f\u043e\u0442\u043e\u043a\u043e\u0432\u043e\u0439 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Stream[str]"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Text"})}),(0,r.jsxs)(n.td,{children:["\u041e\u0442\u0432\u0435\u0442 \u0441 \u043e\u0431\u044b\u0447\u043d\u044b\u043c \u0442\u0435\u043a\u0441\u0442\u043e\u043c \u0438 \u0442\u0438\u043f\u043e\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e ",(0,r.jsx)(n.code,{children:"text/plain"})]}),(0,r.jsx)(n.td,{children:"\u041d\u0435\u0442"}),(0,r.jsx)(n.td,{children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Text"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"HTML"})}),(0,r.jsxs)(n.td,{children:["HTML-\u043e\u0442\u0432\u0435\u0442 \u0441 \u0442\u0438\u043f\u043e\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e ",(0,r.jsx)(n.code,{children:"text/html"})]}),(0,r.jsx)(n.td,{children:"\u041d\u0435\u0442"}),(0,r.jsx)(n.td,{children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f HTML-\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"HTML"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Empty"})}),(0,r.jsx)(n.td,{children:"\u041f\u0443\u0441\u0442\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 (\u0431\u0435\u0437 \u0442\u0435\u043b\u0430)"}),(0,r.jsx)(n.td,{children:"\u041d\u0435\u0442"}),(0,r.jsx)(n.td,{children:"\u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0434\u043b\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Empty"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u041f\u0440\u0438\u043c\u0435\u0440"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from lihil import Json\n\nasync def demo() -> Json[list[int]]: ...\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u043c\u0435\u0442\u043a\u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u043d\u0435 \u0438\u043c\u0435\u044e\u0442 \u0432\u043b\u0438\u044f\u043d\u0438\u044f \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f/\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044e \u0432\u043d\u0435 lihil, \u0432\u0430\u0448 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0442\u0438\u043f\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c ",(0,r.jsx)(n.code,{children:"Json[T]"})," \u043a\u0430\u043a ",(0,r.jsx)(n.code,{children:"T"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"\u043e\u0442\u0432\u0435\u0442-\u0441\u043e-\u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434\u043e\u043c",children:"\u041e\u0442\u0432\u0435\u0442 \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434\u043e\u043c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Annotated[T, status.OK]"})," \u0434\u043b\u044f \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441-\u043a\u043e\u0434\u043e\u043c ",(0,r.jsx)(n.code,{children:"200"}),", \u0433\u0434\u0435 ",(0,r.jsx)(n.code,{children:"T"})," \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0447\u0435\u043c \u0443\u0433\u043e\u0434\u043d\u043e, \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0432 JSON, \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0435\u0442\u043a\u043e\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 ",(0,r.jsx)(n.code,{children:"create_user"})," \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c ",(0,r.jsx)(n.code,{children:"Annotated[UserDB, status.Created]"})," \u0434\u043b\u044f \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0448\u0435\u0433\u043e \u0442\u0438\u043f\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430, \u0437\u0434\u0435\u0441\u044c ",(0,r.jsx)(n.code,{children:"T"})," \u2014 \u044d\u0442\u043e ",(0,r.jsx)(n.code,{children:"UserDB"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0443\u0435\u0442\u0441\u044f \u0432 JSON, \u0442\u0430\u043a \u0447\u0442\u043e \u044d\u0442\u043e \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u043d\u043e ",(0,r.jsx)(n.code,{children:"Annotated[Json[UserDB], status.Created]"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["\u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043e\u0442\u0432\u0435\u0442 \u0441 \u0442\u0438\u043f\u043e\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e ",(0,r.jsx)(n.code,{children:"text/html"}),", \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ",(0,r.jsx)(n.code,{children:"HTML"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'async def hello() -> HTML:\n    return "<p>hello, world!</p>"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"\u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435-\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445-\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439",children:"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439"}),"\n",(0,r.jsxs)(n.p,{children:["\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0438\u043f\u043e\u0432, \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u044b \u043a\u0430\u043a \u0441\u0445\u0435\u043c\u044b ",(0,r.jsx)(n.code,{children:"anyOf"})," \u0432 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 open api."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"async def create_user() -> User | TemporaryUser: ...\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439-\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a/\u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a"}),"\n",(0,r.jsx)(n.p,{children:"\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a/\u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def encoder_user_id(user_id: UUID) -> bytes:\n    return str(user_id)\n\ndef decoder_user_id(user_id: str) -> UUID:\n    return UUID(user_id)\n\nuser_route = Route("/users/{user_id}")\n\n@user_route(encoder=encode_user_id)\nasync def get_user(\n    user_id: Annotated[UUID, Param(decoder=decode_user_id)]\n) -> str:\n    return user_id\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def decoder[T](param: str | bytes) -> T: ...\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"decoder"})," \u0434\u043e\u043b\u0436\u0435\u043d \u043e\u0436\u0438\u0434\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0441 \u0442\u0438\u043f\u043e\u043c \u043b\u0438\u0431\u043e ",(0,r.jsx)(n.code,{children:"str"})," \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u043d\u0435-\u0442\u0435\u043b\u0430, \u043b\u0438\u0431\u043e ",(0,r.jsx)(n.code,{children:"bytes"})," \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0442\u0435\u043b\u0430 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0439 \u0442\u0438\u043f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430, \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 ",(0,r.jsx)(n.code,{children:"decode_user_id"})," \u044d\u0442\u043e ",(0,r.jsx)(n.code,{children:"str"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def encoder[T](param: T) -> bytes: ...\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"encoder"})," \u0434\u043e\u043b\u0436\u0435\u043d \u043e\u0436\u0438\u0434\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043b\u044e\u0431\u043e\u0433\u043e \u0442\u0438\u043f\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f endpoint'\u0430, \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 ",(0,r.jsx)(n.code,{children:"encode_user_id"})," \u044d\u0442\u043e ",(0,r.jsx)(n.code,{children:"str"}),", \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c bytes."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",children:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Endpoint \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u044d\u0442\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="lihil.routing"',children:'\nclass IEndpointProps(TypedDict, total=False):\n    errors: Sequence[type[DetailBase[Any]]] | type[DetailBase[Any]]\n    "\u041e\u0448\u0438\u0431\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0432\u044b\u0437\u0432\u0430\u043d\u044b \u0438\u0437 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e `endpoint`. \u041e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u043e\u0442\u0432\u0435\u0442\u044b \u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 OpenAPI."\n    in_schema: bool\n    "\u0412\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043b\u0438 \u044d\u0442\u043e\u0442 endpoint \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e openapi, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e True"\n    to_thread: bool\n    "\u0414\u043e\u043b\u0436\u0435\u043d \u043b\u0438 \u044d\u0442\u043e\u0442 endpoint \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c"\n    scoped: Literal[True] | None\n    "\u0414\u043e\u043b\u0436\u0435\u043d \u043b\u0438 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 endpoint \u0431\u044b\u0442\u044c scoped, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e None"\n    auth_scheme: AuthBase | None\n    "\u0421\u0445\u0435\u043c\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e None"\n    tags: Sequence[str] | None\n    "OAS tag, endpoint\'\u044b \u0441 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c \u0442\u0435\u0433\u043e\u043c \u0431\u0443\u0434\u0443\u0442 \u0441\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432\u043c\u0435\u0441\u0442\u0435, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0442\u0435\u0433 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430"\n    plugins: list[IPlugin]\n    "\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u044b \u0434\u043b\u044f \u0434\u0435\u043a\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438 endpoint\'\u0430"\n    deps: list[DepNode] | None\n    "\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 "\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"scoped"}),": \u0435\u0441\u043b\u0438 endpoint \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043b\u044e\u0431\u0443\u044e \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u043c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c, \u0438\u043b\u0438 \u0435\u0433\u043e \u0444\u0430\u0431\u0440\u0438\u043a\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440, endpoint \u0431\u0443\u0434\u0435\u0442 scoped, \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 scoped \u0432 None \u044d\u0442\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442, \u043e\u0434\u043d\u0430\u043a\u043e \u0434\u043b\u044f endpoint'\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f scoped, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 ",(0,r.jsx)(n.code,{children:"scoped=True"})," \u0441\u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e scoped."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435-\u0441\u0432\u043e\u0439\u0441\u0442\u0432-endpoint\u0430",children:"\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 endpoint'\u0430"}),"\n",(0,r.jsx)(n.p,{children:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 endpoint'\u0430, \u0438\u0437\u043c\u0435\u043d\u0438\u0432 \u0438\u0445 \u0432 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"@router.get(errors=[UserNotFoundError, UserInactiveError])\nasync get_user(user_id: str): ...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435-\u0441\u0432\u043e\u0439\u0441\u0442\u0432-\u0434\u043b\u044f-\u043a\u0430\u0436\u0434\u043e\u0433\u043e-endpoint\u0430-\u0432-\u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435",children:"\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e endpoint'\u0430 \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435:"}),"\n",(0,r.jsx)(n.p,{children:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from lihil.routing import Route, EndpointProps\n\ndefault_props = EndpointProps(errors=[UserNotFoundError, UserInactiveError])\nprop_route = Route(props=default_props)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u0417\u0434\u0435\u0441\u044c ",(0,r.jsx)(n.code,{children:"default_props"})," \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 endpoint'\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u0432 ",(0,r.jsx)(n.code,{children:"prop_route"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 endpoint'\u0430, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u0442\u0430\u043a\u043e\u0439 \u043a\u0430\u043a ",(0,r.jsx)(n.code,{children:"route.get"}),", \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u043c."]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);