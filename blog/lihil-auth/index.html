<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Set Up User Authentication in Minutes — With or Without a Standalone Database Using lihil-auth | Lihil</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lihil.cc/blog/lihil-auth"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="python, api, fast, webframework, web"><meta data-rh="true" property="og:title" content="Set Up User Authentication in Minutes — With or Without a Standalone Database Using lihil-auth | Lihil"><meta data-rh="true" name="description" content="security"><meta data-rh="true" property="og:description" content="security"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-05-26T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/raceychan"><meta data-rh="true" property="article:tag" content="web development,authentication"><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://lihil.cc/blog/lihil-auth"><link data-rh="true" rel="alternate" href="https://lihil.cc/blog/lihil-auth" hreflang="en"><link data-rh="true" rel="alternate" href="https://lihil.cc/zh/blog/lihil-auth" hreflang="zh"><link data-rh="true" rel="alternate" href="https://lihil.cc/ja/blog/lihil-auth" hreflang="ja"><link data-rh="true" rel="alternate" href="https://lihil.cc/ru/blog/lihil-auth" hreflang="ru"><link data-rh="true" rel="alternate" href="https://lihil.cc/blog/lihil-auth" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://lihil.cc/blog/lihil-auth","mainEntityOfPage":"https://lihil.cc/blog/lihil-auth","url":"https://lihil.cc/blog/lihil-auth","headline":"Set Up User Authentication in Minutes — With or Without a Standalone Database Using lihil-auth","name":"Set Up User Authentication in Minutes — With or Without a Standalone Database Using lihil-auth","description":"security","datePublished":"2025-05-26T00:00:00.000Z","author":{"@type":"Person","name":"raceychan","description":"author of lihil, a developer.","url":"https://github.com/raceychan","image":"https://github.com/raceychan.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://lihil.cc/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Lihil RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Lihil Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3D1PTMXEH0"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3D1PTMXEH0",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.37a1cb93.css">
<script src="/assets/js/runtime~main.75303359.js" defer="defer"></script>
<script src="/assets/js/main.5e350118.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/lhl_logo_ts.png"><link rel="preload" as="image" href="https://github.com/raceychan.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner" style="position:relative"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lhl_logo_ts.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/lhl_logo_ts.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="rollingAd_zYhs"><span class="adText_oa_Y clickable_zrgC" role="button" tabindex="0">The Fastest ASGI Webframework with Django Like Developing Experience</span></div><div class="navbar__items navbar__items--right"><a href="https://github.com/raceychan/lihil" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/blog/lihil-auth" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/blog/lihil-auth" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li><li><a href="/ja/blog/lihil-auth" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/ru/blog/lihil-auth" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li></ul></div><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container-fluid margin-vert--lg" style="max-width:80%;margin:0 auto"><div class="row"><aside class="col col--2"><nav class="sidebar_brwN thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_r4Q1 margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_hiiw">2025</h3><ul class="sidebarItemList_QwSx clean-list"><li class="sidebarItem_lnhn"><a class="sidebarItemLink_yNGZ" href="/blog/encapsulation-isnt-javas-fault-and-python-needs-it-too">Encapsulation Isn’t Java’s Fault (And Python Needs It Too)</a></li><li class="sidebarItem_lnhn"><a class="sidebarItemLink_yNGZ" href="/blog/design-patterns-you-should-unlearn-in-python-part2">Design Patterns You Should Unlearn in Python-Part2</a></li><li class="sidebarItem_lnhn"><a class="sidebarItemLink_yNGZ" href="/blog/design-patterns-you-should-unlearn-in-python-part1">Design Patterns You Should Unlearn in Python-Part1</a></li><li class="sidebarItem_lnhn"><a class="sidebarItemLink_yNGZ" href="/blog/decorators-and--functional-programming">Decorators and Functional programming</a></li><li class="sidebarItem_lnhn"><a aria-current="page" class="sidebarItemLink_yNGZ sidebarItemLinkActive_oSRm" href="/blog/lihil-auth">Set Up User Authentication in Minutes — With or Without a Standalone Database Using lihil-auth</a></li></ul></div></nav></aside><main class="col col--7" style="border-left:1px solid var(--ifm-color-emphasis-200);padding-left:2rem;padding-right:1.5rem"><article class="" style="margin-bottom:3rem;padding:2rem 0;border-bottom:1px solid var(--ifm-color-emphasis-200)"><header><h1 class="title_xvU1">Set Up User Authentication in Minutes — With or Without a Standalone Database Using lihil-auth</h1><div class="container_iJTo margin-vert--md"><time datetime="2025-05-26T00:00:00.000Z">May 26, 2025</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_q4o9"><div class="avatar margin-bottom--sm"><a href="https://github.com/raceychan" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/raceychan.png" alt="raceychan"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/raceychan" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">raceychan</span></a></div><div class="avatar__subtitle-row"><small class="avatar__subtitle" itemprop="description">author of lihil, a developer.</small></div><div class="followRow_wOhk"><div class="followSection_IM0C"><span class="followText_tsCu">Follow me on</span><div class="socialIcons_daQK"><a href="https://x.com/lihil_cc" target="_blank" rel="noopener noreferrer" class="socialIcon_n45S" title="Follow @lihil_cc on X"><svg class="xIcon_QM0L" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a><a href="https://github.com/raceychan" target="_blank" rel="noopener noreferrer" class="socialIcon_n45S" title="Follow @raceychan on GitHub"><svg class="githubIcon_JyQ9" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></div></div></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p><img decoding="async" loading="lazy" alt="security" src="/assets/images/security-d9a9ab6a748229087285372cd80631b9.jpg" width="4576" height="3051" class="img_ev3q"></p>
<p>As someone who has worked on multiple web projects, I’ve found user authentication to be a recurring pain point. Whether I was integrating a third-party auth provider like Supabase, or worse — rolling my own auth system — I often found myself rewriting the same boilerplate:</p>
<ul>
<li>
<p>Configuring JWTs</p>
</li>
<li>
<p>Decoding tokens from headers</p>
</li>
<li>
<p>Serializing them back</p>
</li>
<li>
<p>Hashing passwords</p>
</li>
<li>
<p>Validating login credentials</p>
</li>
</ul>
<p>And that’s not even touching error handling, route wiring, or OpenAPI documentation.</p>
<p>So I built lihil-auth, a plugin system that makes user authentication a breeze. It supports both third-party platforms like <code>Supabase</code> and self-hosted solutions using JWT — with minimal effort.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="supabase-auth-in-one-line">Supabase Auth in One Line<a href="#supabase-auth-in-one-line" class="hash-link" aria-label="Direct link to Supabase Auth in One Line" title="Direct link to Supabase Auth in One Line">​</a></h3>
<p>If you&#x27;re using Supabase, setting up authentication is as simple as:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token keyword" style="color:#81A1C1">from</span><span class="token plain"> lihil </span><span class="token keyword" style="color:#81A1C1">import</span><span class="token plain"> Lihil</span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">from</span><span class="token plain"> lihil</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">plugins</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">auth</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">supabase </span><span class="token keyword" style="color:#81A1C1">import</span><span class="token plain"> signin_route_factory</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> signup_route_factory</span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">app </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> Lihil</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">app</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">include_routes</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    signin_route_factory</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">route_path</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;/login&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    signup_route_factory</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">route_path</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;/signup&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token punctuation" style="color:#8FBCBB">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, <code>signin_route_factory</code> and <code>signup_route_factory</code> generate the <code>/login</code> and <code>/signup</code> routes for you, respectively. They handle everything from user registration to login, including password hashing and JWT generation(thanks to supabase).</p>
<p>You can customize credential type by configuring <code>sign_up_with</code> parameter, where you might want to use <code>phone</code> instead of <code>email</code> for signing up users.</p>
<p>These routes immediately become available in your OpenAPI docs (/docs), allowing you to explore, debug, and test them interactively(thanks to swagger-ui):</p>
<p><img decoding="async" loading="lazy" alt="Supabase Routes" src="/assets/images/openapi_supabase_routes-b6ba4936c94e5f0ef621019aac6363d8.png" width="1736" height="1078" class="img_ev3q">
<img decoding="async" loading="lazy" alt="Supabase debug" src="/assets/images/openapi_supabase_debug-b14b387170c10c9d5834a6fdb36b71da.png" width="1158" height="1162" class="img_ev3q"></p>
<p>With just that, you have a ready-to-use login route backed by Supabase.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="full-docs-supabase-plugin-documentation">Full docs: <a href="https://lihil.cc/docs/advance/plugin/supabase" target="_blank" rel="noopener noreferrer">Supabase Plugin Documentation</a><a href="#full-docs-supabase-plugin-documentation" class="hash-link" aria-label="Direct link to full-docs-supabase-plugin-documentation" title="Direct link to full-docs-supabase-plugin-documentation">​</a></h4>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="want-to-use-your-own-database">Want to use Your Own Database?<a href="#want-to-use-your-own-database" class="hash-link" aria-label="Direct link to Want to use Your Own Database?" title="Direct link to Want to use Your Own Database?">​</a></h3>
<p>No problem. The JWT plugin lets you manage users and passwords your own way, while lihil takes care of encoding/decoding JWTs and injecting them as typed objects.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic-jwt-authentication-example">Basic JWT Authentication Example<a href="#basic-jwt-authentication-example" class="hash-link" aria-label="Direct link to Basic JWT Authentication Example" title="Direct link to Basic JWT Authentication Example">​</a></h4>
<p>You might want to include public user profile information in your JWT, such as user ID and role.
so that you don&#x27;t have to query the database for every request.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token keyword" style="color:#81A1C1">from</span><span class="token plain"> lihil </span><span class="token keyword" style="color:#81A1C1">import</span><span class="token plain"> Payload</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> Route</span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">from</span><span class="token plain"> lihil</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">plugins</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">auth</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">jwt </span><span class="token keyword" style="color:#81A1C1">import</span><span class="token plain"> JWTAuthParam</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> JWTAuthPlugin</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> JWTConfig</span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">from</span><span class="token plain"> lihil</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">plugins</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">auth</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">oauth </span><span class="token keyword" style="color:#81A1C1">import</span><span class="token plain"> OAuth2PasswordFlow</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> OAuthLoginForm</span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">me </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> Route</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token string" style="color:#A3BE8C">&quot;/me&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">token </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> Route</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token string" style="color:#A3BE8C">&quot;/token&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">jwt_auth_plugin </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> JWTAuthPlugin</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">jwt_secret</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;mysecret&quot;</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> jwt_algorithms</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;HS256&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">class</span><span class="token plain"> </span><span class="token class-name" style="color:#8FBCBB">UserProfile</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">Struct</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    user_id</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8FBCBB">str</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> field</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">name</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;sub&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    role</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Literal</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token string" style="color:#A3BE8C">&quot;admin&quot;</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> </span><span class="token string" style="color:#A3BE8C">&quot;user&quot;</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> </span><span class="token string" style="color:#A3BE8C">&quot;user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#8FBCBB">@me</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">.</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">get</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">auth_scheme</span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain">OAuth2PasswordFlow</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">token_url</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;token&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> plugins</span><span class="token operator" style="color:#81A1C1">=</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">jwt_auth_plugin</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">decode_plugin</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">async</span><span class="token plain"> </span><span class="token keyword" style="color:#81A1C1">def</span><span class="token plain"> </span><span class="token function" style="color:#88C0D0">get_user</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">profile</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Annotated</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">UserProfile</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> JWTAuthParam</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">-</span><span class="token operator" style="color:#81A1C1">&gt;</span><span class="token plain"> User</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    </span><span class="token keyword" style="color:#81A1C1">assert</span><span class="token plain"> profile</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">role </span><span class="token operator" style="color:#81A1C1">==</span><span class="token plain"> </span><span class="token string" style="color:#A3BE8C">&quot;user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    </span><span class="token keyword" style="color:#81A1C1">return</span><span class="token plain"> User</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">name</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;user&quot;</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> email</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;user@email.com&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#8FBCBB">@token</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">.</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">post</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">plugins</span><span class="token operator" style="color:#81A1C1">=</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">jwt_auth_plugin</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">encode_plugin</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">expires_in_s</span><span class="token operator" style="color:#81A1C1">=</span><span class="token number" style="color:#81A1C1">3600</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">async</span><span class="token plain"> </span><span class="token keyword" style="color:#81A1C1">def</span><span class="token plain"> </span><span class="token function" style="color:#88C0D0">login_get_token</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> OAuthLoginForm</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">-</span><span class="token operator" style="color:#81A1C1">&gt;</span><span class="token plain"> UserProfile</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    </span><span class="token keyword" style="color:#81A1C1">return</span><span class="token plain"> UserProfile</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">user_id</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;user123&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we define a <code>UserProfile</code> struct that includes the user ID and role, we then might use the <code>role</code> to determine access permissions in our application.</p>
<p>You might wonder if we can trust the <code>role</code> field in the JWT. The answer is yes, because the JWT is signed with a secret key, meaning that any information
encoded in the JWT is <code>read-only</code> and cannot be tampered with by the client. If the client tries to modify the JWT, the signature will no longer match, and the server will reject the token.</p>
<p>This also means that you should not include any sensitive information in the JWT, as it can be decoded by anyone who has access to the token.</p>
<p>We then use <code>jwt_auth_plugin.decode_plugin</code> to decode the JWT and inject the <code>UserProfile</code> into the request handler.
When you return <code>UserProfile</code> from <code>login_get_token</code>, it will automatically be serialized as a JSON Web Token.</p>
<p>By default, the JWT would be returned as oauth2 token response, but you can also return it as a simple string if you prefer.
You can change this behavior by setting <code>scheme_type</code> in <code>encode_plugin</code></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token keyword" style="color:#81A1C1">class</span><span class="token plain"> </span><span class="token class-name" style="color:#8FBCBB">OAuth2Token</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">Base</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    access_token</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8FBCBB">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    expires_in</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> </span><span class="token builtin" style="color:#8FBCBB">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    token_type</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Literal</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token string" style="color:#A3BE8C">&quot;Bearer&quot;</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> </span><span class="token string" style="color:#A3BE8C">&quot;Bearer&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    refresh_token</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Unset</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token builtin" style="color:#8FBCBB">str</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> UNSET</span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    scope</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Unset</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token builtin" style="color:#8FBCBB">str</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> UNSET</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The client can receive the JWT and update its header for subsequent requests:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token plain">token_data </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> </span><span class="token keyword" style="color:#81A1C1">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">json</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">token_type</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> token </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> token_data</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token string" style="color:#A3BE8C">&quot;token_type&quot;</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> token_data</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token string" style="color:#A3BE8C">&quot;access_token&quot;</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">headers </span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8FBCBB">{</span><span class="token string" style="color:#A3BE8C">&quot;Authorization&quot;</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#A3BE8C">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">{</span><span class="token string-interpolation interpolation">token_type</span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">.</span><span class="token string-interpolation interpolation">capitalize</span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">(</span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">)</span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">}</span><span class="token string-interpolation string" style="color:#A3BE8C"> </span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">{</span><span class="token string-interpolation interpolation">token</span><span class="token string-interpolation interpolation punctuation" style="color:#8FBCBB">}</span><span class="token string-interpolation string" style="color:#A3BE8C">&quot;</span><span class="token punctuation" style="color:#8FBCBB">}</span><span class="token plain"> </span><span class="token comment" style="color:#4C566A;font-style:italic"># use this header for subsequent requests</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="role-based-authorization-example">Role-Based Authorization Example<a href="#role-based-authorization-example" class="hash-link" aria-label="Direct link to Role-Based Authorization Example" title="Direct link to Role-Based Authorization Example">​</a></h4>
<p>You can utilize function dependencies to enforce role-based access control in your application.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token keyword" style="color:#81A1C1">def</span><span class="token plain"> </span><span class="token function" style="color:#88C0D0">is_admin</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">profile</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Annotated</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">UserProfile</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> JWTAuthParam</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">-</span><span class="token operator" style="color:#81A1C1">&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:#8FBCBB">bool</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    </span><span class="token keyword" style="color:#81A1C1">if</span><span class="token plain"> profile</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">role </span><span class="token operator" style="color:#81A1C1">!=</span><span class="token plain"> </span><span class="token string" style="color:#A3BE8C">&quot;admin&quot;</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">        </span><span class="token keyword" style="color:#81A1C1">raise</span><span class="token plain"> HTTPException</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">problem_status</span><span class="token operator" style="color:#81A1C1">=</span><span class="token number" style="color:#81A1C1">403</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> detail</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;Forbidden: Admin access required&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#8FBCBB">@me</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">.</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">get</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">auth_scheme</span><span class="token operator" style="color:#81A1C1">=</span><span class="token plain">OAuth2PasswordFlow</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">token_url</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;token&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> plugins</span><span class="token operator" style="color:#81A1C1">=</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">jwt_auth_plugin</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">decode_plugin</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">async</span><span class="token plain"> </span><span class="token keyword" style="color:#81A1C1">def</span><span class="token plain"> </span><span class="token function" style="color:#88C0D0">get_admin_user</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">profile</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Annotated</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">UserProfile</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> JWTAuthParam</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> </span><span class="token keyword" style="color:#81A1C1">_</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> Annotated</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token builtin" style="color:#8FBCBB">bool</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> use</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">is_admin</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">-</span><span class="token operator" style="color:#81A1C1">&gt;</span><span class="token plain"> User</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    </span><span class="token keyword" style="color:#81A1C1">return</span><span class="token plain"> User</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">name</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;user&quot;</span><span class="token punctuation" style="color:#8FBCBB">,</span><span class="token plain"> email</span><span class="token operator" style="color:#81A1C1">=</span><span class="token string" style="color:#A3BE8C">&quot;user@email.com&quot;</span><span class="token punctuation" style="color:#8FBCBB">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, for the <code>get_admin_user</code> endpoint, we define a function dependency <code>is_admin</code> that checks if the user has an admin role. If the user does not have the required role, the request will fail with a 403 Forbidden Error .</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="returning-simple-string-tokens">Returning Simple String Tokens<a href="#returning-simple-string-tokens" class="hash-link" aria-label="Direct link to Returning Simple String Tokens" title="Direct link to Returning Simple String Tokens">​</a></h4>
<p>In some cases, you might always want to query the database for user information, and you don&#x27;t need to return a structured object like <code>UserProfile</code>. Instead, you can return a simple string value that will be encoded as a JWT.</p>
<p>If so, you can simply return a string from the <code>login_get_token</code> endpoint, and it will be encoded as a JWT automatically:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token decorator annotation punctuation" style="color:#8FBCBB">@token</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">.</span><span class="token decorator annotation punctuation" style="color:#8FBCBB">post</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">plugins</span><span class="token operator" style="color:#81A1C1">=</span><span class="token punctuation" style="color:#8FBCBB">[</span><span class="token plain">jwt_auth_plugin</span><span class="token punctuation" style="color:#8FBCBB">.</span><span class="token plain">encode_plugin</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">expires_in_s</span><span class="token operator" style="color:#81A1C1">=</span><span class="token number" style="color:#81A1C1">3600</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token punctuation" style="color:#8FBCBB">]</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain"></span><span class="token keyword" style="color:#81A1C1">async</span><span class="token plain"> </span><span class="token keyword" style="color:#81A1C1">def</span><span class="token plain"> </span><span class="token function" style="color:#88C0D0">login_get_token</span><span class="token punctuation" style="color:#8FBCBB">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"> OAuthLoginForm</span><span class="token punctuation" style="color:#8FBCBB">)</span><span class="token plain"> </span><span class="token operator" style="color:#81A1C1">-</span><span class="token operator" style="color:#81A1C1">&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:#8FBCBB">str</span><span class="token punctuation" style="color:#8FBCBB">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D8DEE9"><span class="token plain">    </span><span class="token keyword" style="color:#81A1C1">return</span><span class="token plain"> </span><span class="token string" style="color:#A3BE8C">&quot;user123&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="full-docs-jwt-plugin-documentation">Full docs: <a href="https://lihil.cc/docs/advance/plugin/jwt" target="_blank" rel="noopener noreferrer">JWT Plugin Documentation</a><a href="#full-docs-jwt-plugin-documentation" class="hash-link" aria-label="Direct link to full-docs-jwt-plugin-documentation" title="Direct link to full-docs-jwt-plugin-documentation">​</a></h4>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="to-use-jwt-only">To use jwt only<a href="#to-use-jwt-only" class="hash-link" aria-label="Direct link to To use jwt only" title="Direct link to To use jwt only">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token plain">pip install &quot;lihil[standard]&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="to-use-both-jwt-and-supabase">To use both jwt and supabase<a href="#to-use-both-jwt-and-supabase" class="hash-link" aria-label="Direct link to To use both jwt and supabase" title="Direct link to To use both jwt and supabase">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2E3440;--prism-color:#D8DEE9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:#2E3440;color:#D8DEE9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D8DEE9"><span class="token plain">pip install &quot;lihil[standard,supabase]&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>Github: <a href="https://github.com/raceychan/lihil" target="_blank" rel="noopener noreferrer">lihil</a></p>
<p>Official Docs: <a href="https://lihil.cc" target="_blank" rel="noopener noreferrer">lihil.cc</a></p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="Best practices of webdevlopment" class="tag_zVej tagRegular_sFm0" href="/blog/tags/web-development">web development</a></li><li class="tag_QGVx"><a title="Authentication and authorization in web applications" class="tag_zVej tagRegular_sFm0" href="/blog/tags/authentication">authentication</a></li></ul></div><div class="social-share-buttons"><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#000000"></circle><path d="M 41.116 18.375 h 4.962 l -10.8405 12.39 l 12.753 16.86 H 38.005 l -7.821 -10.2255 L 21.235 47.625 H 16.27 l 11.595 -13.2525 L 15.631 18.375 H 25.87 l 7.0695 9.3465 z m -1.7415 26.28 h 2.7495 L 24.376 21.189 H 21.4255 z" fill="white"></path></svg></button><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#0077B5"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#FF5700"></circle><path d="M 53.34375 32 C 53.277344 30.160156 52.136719 28.53125 50.429688 27.839844 C 48.722656 27.148438 46.769531 27.523438 45.441406 28.800781 C 41.800781 26.324219 37.519531 24.957031 33.121094 24.863281 L 35.199219 14.878906 L 42.046875 16.320312 C 42.214844 17.882812 43.496094 19.09375 45.066406 19.171875 C 46.636719 19.253906 48.03125 18.183594 48.359375 16.644531 C 48.6875 15.105469 47.847656 13.558594 46.382812 12.992188 C 44.914062 12.425781 43.253906 13.007812 42.464844 14.367188 L 34.625 12.800781 C 34.363281 12.742188 34.09375 12.792969 33.871094 12.9375 C 33.648438 13.082031 33.492188 13.308594 33.441406 13.566406 L 31.070312 24.671875 C 26.617188 24.738281 22.277344 26.105469 18.59375 28.609375 C 17.242188 27.339844 15.273438 26.988281 13.570312 27.707031 C 11.863281 28.429688 10.746094 30.089844 10.71875 31.941406 C 10.691406 33.789062 11.757812 35.484375 13.441406 36.257812 C 13.402344 36.726562 13.402344 37.195312 13.441406 37.664062 C 13.441406 44.832031 21.792969 50.65625 32.097656 50.65625 C 42.398438 50.65625 50.753906 44.832031 50.753906 37.664062 C 50.789062 37.195312 50.789062 36.726562 50.753906 36.257812 C 52.363281 35.453125 53.371094 33.800781 53.34375 32 Z M 21.34375 35.199219 C 21.34375 33.433594 22.777344 32 24.542969 32 C 26.3125 32 27.742188 33.433594 27.742188 35.199219 C 27.742188 36.96875 26.3125 38.398438 24.542969 38.398438 C 22.777344 38.398438 21.34375 36.96875 21.34375 35.199219 Z M 39.9375 44 C 37.664062 45.710938 34.871094 46.582031 32.03125 46.464844 C 29.191406 46.582031 26.398438 45.710938 24.128906 44 C 23.847656 43.65625 23.871094 43.15625 24.183594 42.839844 C 24.5 42.527344 25 42.503906 25.34375 42.785156 C 27.269531 44.195312 29.617188 44.90625 32 44.800781 C 34.386719 44.929688 36.746094 44.242188 38.6875 42.847656 C 39.042969 42.503906 39.605469 42.511719 39.953125 42.863281 C 40.296875 43.21875 40.289062 43.785156 39.9375 44.128906 Z M 39.359375 38.527344 C 37.59375 38.527344 36.160156 37.09375 36.160156 35.328125 C 36.160156 33.5625 37.59375 32.128906 39.359375 32.128906 C 41.128906 32.128906 42.558594 33.5625 42.558594 35.328125 C 42.59375 36.203125 42.269531 37.054688 41.65625 37.6875 C 41.046875 38.316406 40.203125 38.664062 39.328125 38.65625 Z M 39.359375 38.527344" fill="white"></path></svg></button><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#1185FE"></circle><path d="M21.945 18.886C26.015 21.941 30.393 28.137 32 31.461 33.607 28.137 37.985 21.941 42.055 18.886 44.992 16.681 49.75 14.975 49.75 20.403 49.75 21.487 49.128 29.51 48.764 30.813 47.497 35.341 42.879 36.496 38.772 35.797 45.951 37.019 47.778 41.067 43.833 45.114 36.342 52.801 33.066 43.186 32.227 40.722 32.073 40.27 32.001 40.059 32 40.238 31.999 40.059 31.927 40.27 31.773 40.722 30.934 43.186 27.658 52.801 20.167 45.114 16.222 41.067 18.049 37.019 25.228 35.797 21.121 36.496 16.503 35.341 15.236 30.813 14.872 29.51 14.25 21.487 14.25 20.403 14.25 14.975 19.008 16.681 21.945 18.886Z" fill="white"></path></svg></button></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/decorators-and--functional-programming"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Decorators and Functional programming</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/what-to-do-when-http-status-codes-dont-fit-your-business-error"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">What to Do When HTTP Status Codes Don’t Fit Your Business Error</div></a></nav><div style="display:block;margin-top:2rem" class="mobile-subscription"><div id="subscription-widget" style="margin-top:1rem;margin-bottom:0;position:static;top:auto;opacity:1;transform:translateY(0);transition:opacity 0.4s ease, transform 0.4s ease;border:1px solid var(--ifm-color-emphasis-200);border-radius:0.5rem;background-color:var(--ifm-background-surface-color);box-shadow:none;z-index:10"><button style="position:absolute;top:0.5rem;right:0.5rem;background:none;border:none;font-size:1.2rem;color:var(--ifm-color-emphasis-600);cursor:pointer;padding:0.25rem;border-radius:50%;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;transition:color 0.2s ease, background-color 0.2s ease" title="Close">×</button><form style="padding:1.5rem;background-color:transparent;border-radius:0 0 0.5rem 0.5rem;display:flex;flex-direction:column;gap:1rem;border:none"><div style="text-align:center;margin-bottom:0.75rem"><div style="font-size:1.125rem;font-weight:600;color:var(--ifm-color-primary);margin-bottom:0.125rem;letter-spacing:-0.025em">Enter your email to subscribe.</div><div style="font-size:0.9rem;color:var(--ifm-color-content-secondary);line-height:1.2">Subscribe to receive original, unique insights on OOP, web development and AI.</div></div><input type="email" id="bd-email" required="" placeholder="your@email.com" style="padding:0.875rem 1rem;border:1.5px solid var(--ifm-color-emphasis-300);border-radius:0.5rem;font-size:0.9rem;background-color:var(--ifm-background-color);color:var(--ifm-color-content);outline:none;transition:all 0.2s ease;box-shadow:0 1px 3px rgba(0, 0, 0, 0.1)" name="email"><button type="submit" style="padding:0.875rem 2rem;background-color:var(--ifm-color-primary);color:white;border:none;border-radius:0.5rem;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;gap:0.5rem;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);letter-spacing:0.025em">Subscribe</button><p style="margin:0;font-size:0.75rem;color:var(--ifm-color-content-secondary);text-align:center">No spam, unsubscribe anytime.</p></form></div></div></main><div class="col col--2" style="font-size:0.875rem;position:relative"><div id="subscription-widget" style="margin-top:0;margin-bottom:1rem;position:static;top:auto;opacity:1;transform:translateY(0);transition:opacity 0.4s ease, transform 0.4s ease;border:1px solid var(--ifm-color-emphasis-200);border-radius:0.5rem;background-color:var(--ifm-background-surface-color);box-shadow:none;z-index:100"><button style="position:absolute;top:0.5rem;right:0.5rem;background:none;border:none;font-size:1.2rem;color:var(--ifm-color-emphasis-600);cursor:pointer;padding:0.25rem;border-radius:50%;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;transition:color 0.2s ease, background-color 0.2s ease" title="Close">×</button><form style="padding:1.5rem;background-color:transparent;border-radius:0 0 0.5rem 0.5rem;display:flex;flex-direction:column;gap:1rem;border:none"><div style="text-align:center;margin-bottom:0.75rem"><div style="font-size:1.125rem;font-weight:600;color:var(--ifm-color-primary);margin-bottom:0.125rem;letter-spacing:-0.025em">Enter your email to subscribe.</div><div style="font-size:0.9rem;color:var(--ifm-color-content-secondary);line-height:1.2">Subscribe to receive original, unique insights on OOP, web development and AI.</div></div><input type="email" id="bd-email" required="" placeholder="your@email.com" style="padding:0.875rem 1rem;border:1.5px solid var(--ifm-color-emphasis-300);border-radius:0.5rem;font-size:0.9rem;background-color:var(--ifm-background-color);color:var(--ifm-color-content);outline:none;transition:all 0.2s ease;box-shadow:0 1px 3px rgba(0, 0, 0, 0.1)" name="email"><button type="submit" style="padding:0.875rem 2rem;background-color:var(--ifm-color-primary);color:white;border:none;border-radius:0.5rem;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;gap:0.5rem;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);letter-spacing:0.025em">Subscribe</button><p style="margin:0;font-size:0.75rem;color:var(--ifm-color-content-secondary);text-align:center">No spam, unsubscribe anytime.</p></form></div><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#supabase-auth-in-one-line" class="table-of-contents__link toc-highlight">Supabase Auth in One Line</a><ul><li><a href="#full-docs-supabase-plugin-documentation" class="table-of-contents__link toc-highlight">Full docs: Supabase Plugin Documentation</a></li></ul></li><li><a href="#want-to-use-your-own-database" class="table-of-contents__link toc-highlight">Want to use Your Own Database?</a><ul><li><a href="#basic-jwt-authentication-example" class="table-of-contents__link toc-highlight">Basic JWT Authentication Example</a></li><li><a href="#role-based-authorization-example" class="table-of-contents__link toc-highlight">Role-Based Authorization Example</a></li><li><a href="#returning-simple-string-tokens" class="table-of-contents__link toc-highlight">Returning Simple String Tokens</a></li><li><a href="#full-docs-jwt-plugin-documentation" class="table-of-contents__link toc-highlight">Full docs: JWT Plugin Documentation</a></li></ul></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#to-use-jwt-only" class="table-of-contents__link toc-highlight">To use jwt only</a></li><li><a href="#to-use-both-jwt-and-supabase" class="table-of-contents__link toc-highlight">To use both jwt and supabase</a></li></ul></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://x.com/lihil_cc" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lihil" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/ptFvzqnj" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/raceychan/lihil" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 lihil, Inc.</div></div></div></footer></div>
</body>
</html>