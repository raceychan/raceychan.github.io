"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[1079],{28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>d});var t=n(96540);const a={},s=t.createContext(a);function i(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:r},e.children)}},50423:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"http/request/body","title":"body","description":"While path, query, and header parameters are usually small bits of data encoded in the URL or headers, body parameters carry the main payload of a request. They\'re typically used in methods like POST, PUT, and PATCH, where a client needs to send structured data to the server.","source":"@site/docs/http/request/body.md","sourceDirName":"http/request","slug":"/http/request/body-parameter","permalink":"/docs/http/request/body-parameter","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"body","slug":"body-parameter"},"sidebar":"tutorialSidebar","previous":{"title":"cookie","permalink":"/docs/http/request/cookie-parameter"},"next":{"title":"form","permalink":"/docs/http/request/from-data"}}');var a=n(74848),s=n(28453);const i={sidebar_position:4,title:"body",slug:"body-parameter"},d="Body Parameters",l={},o=[{value:"Body Parameters vs Other Request Parameters",id:"body-parameters-vs-other-request-parameters",level:2},{value:"Summary of Differences",id:"summary-of-differences",level:3},{value:"Declaring a Body Parameter in lihil",id:"declaring-a-body-parameter-in-lihil",level:2},{value:"Implicitly declare request body via Structured Data Type",id:"implicitly-declare-request-body-via-structured-data-type",level:3},{value:"Explicitly with Param(&quot;body&quot;)",id:"explicitly-with-parambody",level:3},{value:"Constraints and Validation",id:"constraints-and-validation",level:2},{value:"Custom Decoders",id:"custom-decoders",level:2},{value:"Recap",id:"recap",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"body-parameters",children:"Body Parameters"})}),"\n",(0,a.jsx)(r.p,{children:"While path, query, and header parameters are usually small bits of data encoded in the URL or headers, body parameters carry the main payload of a request. They're typically used in methods like POST, PUT, and PATCH, where a client needs to send structured data to the server."}),"\n",(0,a.jsx)(r.p,{children:"For example:"}),"\n",(0,a.jsx)(r.p,{children:"This is a typical HTTP request with a JSON body:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-http",children:'POST /users HTTP/1.1\nContent-Type: application/json\n\n{\n  "username": "alice",\n  "age": 30\n}\n'})}),"\n",(0,a.jsx)(r.h2,{id:"body-parameters-vs-other-request-parameters",children:"Body Parameters vs Other Request Parameters"}),"\n",(0,a.jsx)(r.p,{children:"When handling HTTP requests, it's important to understand the difference between body parameters and other request parameters such as query parameters, path parameters, and header values. These differences affect how data is sent by the client and how it is parsed by the server."}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"Location in the Request\nBody parameters are transmitted in a fundamentally different way compared to other parameters."}),"\n",(0,a.jsx)(r.p,{children:"Let\u2019s revisit a typical POST request example:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-http",children:'POST /submit HTTP/1.1\nHost: example.com\nContent-Type: application/json\nContent-Length: 27\n\n{"key": "value"}\n'})}),"\n",(0,a.jsx)(r.p,{children:"This HTTP request is divided into two parts, separated by a blank line:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"Request line and headers (everything before the blank line): this includes the method (POST), the path (/submit), and headers like Content-Type."}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"Request body (everything after the blank line): this contains the actual payload, in this case, a JSON object."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"Unlike query or path parameters, body parameters do not appear in the URL or in headers. They are placed in the body of the request and are typically used to send structured data such as JSON, XML, or form-encoded values."}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"Encoding Format\nAnother key difference is how body parameters are encoded:"}),"\n",(0,a.jsx)(r.p,{children:"When sending query parameters, the encoding happens in the URL:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-http",children:"GET /search?query=python&sort=asc\n"})}),"\n",(0,a.jsx)(r.p,{children:"Query values are URL-encoded and relatively limited in size."}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["Body parameters, on the other hand, are encoded based on the ",(0,a.jsx)(r.code,{children:"Content-Type"})," header. Common formats include:"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"application/json \u2014 for sending JSON payloads."}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"application/x-www-form-urlencoded \u2014 often used in HTML form submissions."}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"multipart/form-data \u2014 used when uploading files."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["The server uses the ",(0,a.jsx)(r.code,{children:"Content-Type"})," header to decide how to parse the request body. For example, if the header is application/json, the server expects the body to contain valid JSON."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"summary-of-differences",children:"Summary of Differences"}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Feature"}),(0,a.jsx)(r.th,{children:"Query/Path/Header Params"}),(0,a.jsx)(r.th,{children:"Body Params"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Appears in URL?"}),(0,a.jsx)(r.td,{children:"Yes"}),(0,a.jsx)(r.td,{children:"No"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Location in Request"}),(0,a.jsx)(r.td,{children:"Request line or headers"}),(0,a.jsx)(r.td,{children:"After blank line (request body)"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Encoding Type"}),(0,a.jsx)(r.td,{children:"URL-encoded (query), plain text"}),(0,a.jsx)(r.td,{children:"JSON, form data, multipart, etc."})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Use Case"}),(0,a.jsx)(r.td,{children:"Small/simple values, routing"}),(0,a.jsx)(r.td,{children:"Complex objects, forms, file uploads"})]})]})]}),"\n",(0,a.jsx)(r.p,{children:"Understanding this distinction is essential when designing or consuming APIs, especially in typed frameworks like lihil, where body parameters and other parameters are declared differently and parsed with different logic under the hood."}),"\n",(0,a.jsx)(r.h2,{id:"declaring-a-body-parameter-in-lihil",children:"Declaring a Body Parameter in lihil"}),"\n",(0,a.jsx)(r.p,{children:"In lihil, there are two ways to declare a request body:"}),"\n",(0,a.jsx)(r.h3,{id:"implicitly-declare-request-body-via-structured-data-type",children:"Implicitly declare request body via Structured Data Type"}),"\n",(0,a.jsx)(r.p,{children:"You can simply define a body model using msgspec.Struct, and lihil will automatically treat it as the request body:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-python",children:'\nimport msgspec\nfrom lihil import Route\n\nclass CreateUser(msgspec.Struct):\n    username: str\n    age: int\n\nuser = Route("/users")\n\n@user.post\nasync def create_user(data: CreateUser) -> str:\n    return f"Hello {data.username}!"\n'})}),"\n",(0,a.jsx)(r.p,{children:"This is the preferred way when your request body is a structured object (e.g., a JSON document)."}),"\n",(0,a.jsxs)(r.p,{children:["since lihil ",(0,a.jsx)(r.code,{children:"0.2.9"}),", Strucutred Data Types:"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"msgspec.Struct"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"dataclasses.dataclass"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"typing.Typeddict"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"dict"})}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"are supported for body param"}),"\n",(0,a.jsx)(r.h3,{id:"explicitly-with-parambody",children:'Explicitly with Param("body")'}),"\n",(0,a.jsx)(r.p,{children:'If you want to be explicit, or if you are combining body data with other types of parameters, you can use Param("body"):'}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-python",children:'from lihil import Param\nfrom typing import Annotated\n\n@user.post\nasync def create_user(\n    data: Annotated[CreateUser, Param("body")]\n) -> str:\n    return f"Hello {data.username}!"\n'})}),"\n",(0,a.jsx)(r.p,{children:"This approach is espceially useful when your body is a primitive value like a string or a list."}),"\n",(0,a.jsx)(r.h2,{id:"constraints-and-validation",children:"Constraints and Validation"}),"\n",(0,a.jsx)(r.p,{children:"Since body parameters use msgspec, you can apply validation constraints directly in your Struct, or via Param, just like you would with path or query parameters:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-python",children:"from lihil import Param\nfrom typing import Annotated\n\nclass CreateUser(msgspec.Struct):\n    username: Annotated[str, Param(min_length=3, max_length=30)]\n    age: Annotated[int, Param(ge=0, le=120)]\n"})}),"\n",(0,a.jsx)(r.h2,{id:"custom-decoders",children:"Custom Decoders"}),"\n",(0,a.jsx)(r.p,{children:"For advanced use cases, you can supply a custom decoder via Param:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-python",children:'from lihil import Param\nfrom typing import Annotated\n\ndef parse_data(value: bytes) -> CreateUser:\n    # your custom logic\n    return CreateUser(...)\n\n@user.post\nasync def create_user(\n    data: Annotated[CreateUser, Param("body", decoder=parse_data)]\n): ...\n'})}),"\n",(0,a.jsx)(r.p,{children:"This gives you full control over how raw body bytes are interpreted."}),"\n",(0,a.jsx)(r.h2,{id:"recap",children:"Recap"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"Body parameters are a powerful way to send structured data in HTTP requests."}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"They are essential for APIs that need to accept complex data types, such as JSON objects or binary files."}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["Lihil makes it easy to work with body parameters, allowing you to define them using Structured data types or ",(0,a.jsx)(r.code,{children:'Param("body")'}),"."]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsx)(r.p,{children:"You can also apply validation constraints and even use custom decoders for advanced scenarios."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);