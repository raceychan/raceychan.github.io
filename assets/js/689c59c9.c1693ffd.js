"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[9275],{3777:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"http/route","title":"route","description":"When you define a route, you expose a resource through a specific path that clients can request. you then add an Endpoint on the route to determin what clients can do with the resource.","source":"@site/docs/http/route.md","sourceDirName":"http","slug":"/http/route","permalink":"/docs/http/route","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"route"},"sidebar":"tutorialSidebar","previous":{"title":"endpoint","permalink":"/docs/http/endpoint"},"next":{"title":"application","permalink":"/docs/http/app"}}');var s=t(4848),i=t(8453);const o={sidebar_position:2,title:"route"},d=void 0,c={},l=[{value:"Defining an route",id:"defining-an-route",level:2},{value:"register endpoint to an route.",id:"register-endpoint-to-an-route",level:3},{value:"Defining an sub-route",id:"defining-an-sub-route",level:2},{value:"The root route",id:"the-root-route",level:2}];function u(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["When you define a route, you expose a resource through a specific ",(0,s.jsx)(n.strong,{children:"path"})," that clients can request. you then add an ",(0,s.jsx)(n.code,{children:"Endpoint"})," on the route to determin what clients can do with the resource."]}),"\n",(0,s.jsxs)(n.p,{children:["Take url ",(0,s.jsx)(n.code,{children:"https://dontclickme.com/users"})," as an example, path ",(0,s.jsx)(n.code,{children:"/users"})," would locate resource ",(0,s.jsx)(n.code,{children:"users"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"defining-an-route",children:"Defining an route"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from lihil import Route\n\nusers_route = Route("/users")\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you have existing ",(0,s.jsx)(n.code,{children:"lihil.Graph"})," and ",(0,s.jsx)(n.code,{children:"lihil.MessageRegistry"})," that you would like to use, put then in the route constructor."]}),"\n",(0,s.jsx)(n.p,{children:"This is useful if you keep dependencies and event listeners in separate files, example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from project.users.deps import user_graph\nfrom project.users.listeners import user_eventregistry\n\nuser_route = Route(graph=uesr_graph, registry=user_eventregistry)\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can also add middlewares to a route if you want them to apply only to that specific route."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from starlette.middleware.cors import CORSMiddleware\nfrom starlette.middleware.httpsredirect import HTTPSRedirectMiddleware\n\nRoute(middlewares=[CORSMiddleware])\nroute.add_middleware(HTTPSRedirectMiddleware)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"register-endpoint-to-an-route",children:"register endpoint to an route."}),"\n",(0,s.jsxs)(n.p,{children:["In previous dicussion, we expose ",(0,s.jsx)(n.code,{children:"create_user"})," as an endpoint for ",(0,s.jsx)(n.code,{children:"POST"})," request of ",(0,s.jsx)(n.code,{children:"users_route"}),".\nwe can also declare other http methods with similar syntax, this includes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"GET"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"POST"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"HEAD"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"OPTIONS"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"TRACE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"PUT"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DELETE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"PATCH"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CONNECT"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This means that an route can have 0-9 endpoints."}),"\n",(0,s.jsx)(n.p,{children:"to expose a function for multiple http methods"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"apply multiple decorators to the function"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["or, equivalently, use ",(0,s.jsx)(n.code,{children:"Route.add_endpoint"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'\nusers_route.add_endpoint("GET", "POST", ...,  create_user)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"defining-an-sub-route",children:"Defining an sub-route"}),"\n",(0,s.jsxs)(n.p,{children:["In previous discussion, we created a route for ",(0,s.jsx)(n.code,{children:"users"}),", a collection of the user resource,\nto expose an specific user resource,"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'user_route = users_route.sub("{user_id}")\n\n@user_route.get\nasync def get_user(user_id: str, limit: int = 1): ...\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Here,\nwe define a sub route of ",(0,s.jsx)(n.code,{children:"users_route"}),", when we include an route into our ",(0,s.jsx)(n.code,{children:"Lihil"}),", all of its sub-routes will also be included recursively."]}),"\n",(0,s.jsx)(n.p,{children:"Route are unique to path, thus, you might call it constructor with same path multiple times."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'@users_route.sub("{user_id}").get\nasync def get_user(user_id: str, limit: int = 1): ...\n\n@users_route.sub("{user_id}").put\nasync def update_user(data: UserUpdate): ...\n'})}),"\n",(0,s.jsxs)(n.p,{children:["here both ",(0,s.jsx)(n.code,{children:"get_user"})," and ",(0,s.jsx)(n.code,{children:"update_user"})," are under the same route."]}),"\n",(0,s.jsx)(n.h2,{id:"the-root-route",children:"The root route"}),"\n",(0,s.jsxs)(n.p,{children:["an route with path ",(0,s.jsx)(n.code,{children:"/"})," is the root route, if not provided, root route is created with ",(0,s.jsx)(n.code,{children:"Lihil"})," by default, anything registered via ",(0,s.jsx)(n.code,{children:"Lihil.{http method}"})," is the under the root route."]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var r=t(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);