"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[1381],{24233:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"http/request/header","title":"header","description":"Headers are key-value pairs sent along with an HTTP request. They carry metadata about the request\u2014like content type, authorization tokens, client information, and more. Headers are not part of the URL or the body, but are sent in a separate section between the request line and the body.","source":"@site/docs/http/request/header.md","sourceDirName":"http/request","slug":"/http/request/header-parameter","permalink":"/docs/http/request/header-parameter","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"header","slug":"header-parameter"},"sidebar":"tutorialSidebar","previous":{"title":"query","permalink":"/docs/http/request/query-parameter"},"next":{"title":"cookie","permalink":"/docs/http/request/cookie-parameter"}}');var n=t(74848),s=t(28453);const i={sidebar_position:3,title:"header",slug:"header-parameter"},l="Headers",o={},d=[{value:"What Do Header Parameters Look Like?",id:"what-do-header-parameters-look-like",level:2},{value:"Header Parameters vs Other Request Parameters",id:"header-parameters-vs-other-request-parameters",level:2},{value:"Declaring Header Parameters in lihil",id:"declaring-header-parameters-in-lihil",level:2},{value:"Multi-Value Headers",id:"multi-value-headers",level:2},{value:"Header Key Mapping",id:"header-key-mapping",level:2},{value:"Custom Decoder",id:"custom-decoder",level:2},{value:"Recap",id:"recap",level:2}];function c(e){const a={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"headers",children:"Headers"})}),"\n",(0,n.jsx)(a.p,{children:"Headers are key-value pairs sent along with an HTTP request. They carry metadata about the request\u2014like content type, authorization tokens, client information, and more. Headers are not part of the URL or the body, but are sent in a separate section between the request line and the body."}),"\n",(0,n.jsx)(a.h2,{id:"what-do-header-parameters-look-like",children:"What Do Header Parameters Look Like?"}),"\n",(0,n.jsx)(a.p,{children:"Here\u2019s what a request with headers might look like:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-http",children:"GET /profile HTTP/1.1\nHost: example.com\nUser-Agent: curl/8.5.0\nAccept: application/json, text/plain, text/html\n"})}),"\n",(0,n.jsx)(a.p,{children:"Each header is structured as a key-value pair, and according to the HTTP specification (RFC 7230), a header key can appear multiple times with different values. When that happens, the values are either:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"sent as separate header lines with the same key"}),"\n",(0,n.jsx)(a.li,{children:"combined into a single comma-separated value."}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"header-parameters-vs-other-request-parameters",children:"Header Parameters vs Other Request Parameters"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Location in Request\nHeader parameters are part of the HTTP headers, sent separately from the URL and body. For example:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-http",children:"GET /resource HTTP/1.1\nHost: example.com\nAuthorization: Bearer abc123\nX-Custom-Header: value\n"})}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Encoding Format\nHeaders are plain text key-value pairs. Unlike query parameters, they are not URL-encoded, but values must conform to HTTP header standards."}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Data Types\nHeaders typically carry strings but can be parsed into primitive types like int, bool, or custom types as needed."}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Use Cases\nHeaders are commonly used for metadata such as authentication tokens, content type, user agent info, or custom control flags. They\u2019re not designed to carry large or complex data structures like body parameters."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"declaring-header-parameters-in-lihil",children:"Declaring Header Parameters in lihil"}),"\n",(0,n.jsxs)(a.p,{children:["You can easily declare header parameters directly in your endpoint using ",(0,n.jsx)(a.code,{children:'Param("header")'}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:'from lihil import Route, Param\nfrom typing import Annotated\n\nroute = Route("/greet")\n\n@route.get\nasync def greet_user(\n    user_agent: Annotated[str, Param("header")],  # Auto-maps to "user-agent"\n    accept: Annotated[list[str], Param("header")],  # Handles comma-separated Accept\n):\n    return {"ua": user_agent, "accepts": accept}\n'})}),"\n",(0,n.jsx)(a.h2,{id:"multi-value-headers",children:"Multi-Value Headers"}),"\n",(0,n.jsxs)(a.p,{children:["Some headers\u2014like ",(0,n.jsx)(a.code,{children:"Accept"}),", ",(0,n.jsx)(a.code,{children:"Accept-Language"}),", ",(0,n.jsx)(a.code,{children:"Cache-Control"})," naturally support multiple values, separated by commas."]}),"\n",(0,n.jsx)(a.p,{children:"lihil supports this out of the box. To accept a multi-value header, just use a list[str] type hint:"}),"\n",(0,n.jsx)(a.p,{children:"To accept a multi-value header, just use a list[str] type hint:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:'accept: Annotated[list[str], Param("header")]\n'})}),"\n",(0,n.jsx)(a.p,{children:"This will correctly parse:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-http",children:"Accept: text/html, application/json\n"})}),"\n",(0,n.jsx)(a.p,{children:"into:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:'["text/html", "application/json"]\n'})}),"\n",(0,n.jsx)(a.h2,{id:"header-key-mapping",children:"Header Key Mapping"}),"\n",(0,n.jsx)(a.p,{children:"HTTP header names often use kebab-case (e.g. X-Request-ID), but Python variables can't contain dashes. lihil solves this in two ways:"}),"\n",(0,n.jsxs)(a.p,{children:["Auto-mapping: By default, lihil will convert ",(0,n.jsx)(a.code,{children:"my_token"})," to ",(0,n.jsx)(a.code,{children:"my-token"}),"."]}),"\n",(0,n.jsx)(a.p,{children:"Explicit aliasing: You can use the alias option to specify the exact header key:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:'request_id: Annotated[str, Param("header", alias="x-request-id")]\n'})}),"\n",(0,n.jsx)(a.h2,{id:"custom-decoder",children:"Custom Decoder"}),"\n",(0,n.jsx)(a.p,{children:"for more complex headers, you can define a custom decoder function. This function takes the raw header value and returns the desired type."}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-python",children:'from lihil import Route, Param\nfrom typing import Annotated\n\ndef custom_decoder(value: str) -> str:\n    # Custom decoding logic\n    return value.lower()\n\nroute = Route("/greet")\n\n@route\nasync def create_user(\n    user_agent: Annotated[str, Param("header")],\n    custom_header: Annotated[str, Param("header", decoder=custom_decoder)],\n):\n    return {"ua": user_agent, "custom": custom_header}\n'})}),"\n",(0,n.jsx)(a.h2,{id:"recap",children:"Recap"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Header parameters are part of HTTP headers, carrying metadata like auth tokens or custom flags."}),"\n",(0,n.jsx)(a.li,{children:"They are plain text key-value pairs, not URL-encoded."}),"\n",(0,n.jsx)(a.li,{children:"In lihil, declare headers explicitly using Annotated with Param(alias=...) for exact header names."}),"\n",(0,n.jsx)(a.li,{children:"lihil handles type conversion, validation, and default values automatically."}),"\n",(0,n.jsx)(a.li,{children:"Missing or invalid headers result in automatic error responses for robust input handling."}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,a,t)=>{t.d(a,{R:()=>i,x:()=>l});var r=t(96540);const n={},s=r.createContext(n);function i(e){const a=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);