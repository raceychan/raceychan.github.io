"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[3361],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var r=i(96540);const t={},s=r.createContext(t);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}},62502:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"index","title":"QuickStart","description":"Hello World","source":"@site/docs/index.md","sourceDirName":".","slug":"/","permalink":"/docs/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"QuickStart","sidebar_position":1,"slug":"/"},"sidebar":"tutorialSidebar","next":{"title":"Installation","permalink":"/docs/installation"}}');var t=i(74848),s=i(28453);const l={title:"QuickStart",sidebar_position:1,slug:"/"},a="Quick Start:",o={},u=[{value:"Hello World",id:"hello-world",level:2},{value:"Serve your app using uvicorn",id:"serve-your-app-using-uvicorn",level:3},{value:"Larger app",id:"larger-app",level:2},{value:"Define a python function",id:"define-a-python-function",level:3},{value:"Expose the function as an endpoint:",id:"expose-the-function-as-an-endpoint",level:3},{value:"Include the route into app",id:"include-the-route-into-app",level:3},{value:"Serve your app using lihil",id:"serve-your-app-using-lihil",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"quick-start",children:"Quick Start:"})}),"\n",(0,t.jsx)(n.h2,{id:"hello-world",children:"Hello World"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="app/main.py"',children:'from lihil import Lihil, Text, Annotated\n\nlhl = Lihil()\n\n@lhl.get\ndef hello(world: str = "world") -> Annotated[Text, 200]:\n    return f"hello, {world}!"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"serve-your-app-using-uvicorn",children:"Serve your app using uvicorn"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uvicorn app.main:lhl\n"})}),"\n",(0,t.jsx)(n.h2,{id:"larger-app",children:"Larger app"}),"\n",(0,t.jsx)(n.h3,{id:"define-a-python-function",children:"Define a python function"}),"\n",(0,t.jsx)(n.p,{children:"Let's start by defining a function that creates an user in the database."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="app/users/api.py"',children:"from msgspec import Struct\nfrom sqlalchemy.ext.asyncio import AsyncEngine\nfrom .users.db import user_sql\n\nclass UserDB(UserData):\n    user_id: str\n\ndef get_engine() -> AsyncEngine:\n    return AsyncEngine()\n\nasync def create_user(user: UserData, engine: AsyncEngine) -> UserDB:\n    user_id = str(uuid4())\n    sql = user_sql(user=user, id_=user_id)\n    async with engine.begin() as conn:\n        await conn.execute(sql)\n    return UserDB.from_user(user, id=user_id)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"expose-the-function-as-an-endpoint",children:"Expose the function as an endpoint:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="app/users/api.py"',children:'from lihil import Route\n\nusers_route = Route("/users")\nusers_route.factory(get_engine)\nusers_route.post(create_user)\n'})}),"\n",(0,t.jsx)(n.p,{children:"With just three lines, we:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:'Create a Route with the path "/users".'}),"\n",(0,t.jsxs)(n.li,{children:["Register ",(0,t.jsx)(n.code,{children:"AsyncEngine"})," as a dependency, using ",(0,t.jsx)(n.code,{children:"get_engine"})," as its factory."]}),"\n",(0,t.jsx)(n.li,{children:"Register create_user as the POST endpoint."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"include-the-route-into-app",children:"Include the route into app"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="app/main.py"',children:'from lihil import Lihil\nfrom app.users.api import user_route\n\n\nlihil = Lihil(user_route)\n\nif __name__ == "__main__":\n    lihil.run(__file__)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"serve-your-app-using-lihil",children:"Serve your app using lihil"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python -m app.main\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);