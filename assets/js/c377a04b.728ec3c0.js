"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[3361],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(96540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}},62502:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"index","title":"QuickStart","description":"Simple app","source":"@site/docs/index.md","sourceDirName":".","slug":"/","permalink":"/docs/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"QuickStart","sidebar_position":1,"slug":"/"},"sidebar":"tutorialSidebar","next":{"title":"Installation","permalink":"/docs/installation"}}');var r=t(74848),s=t(28453);const a={title:"QuickStart",sidebar_position:1,slug:"/"},o="Quick Start:",l={},p=[{value:"Simple app",id:"simple-app",level:2},{value:"Serve your app",id:"serve-your-app",level:3},{value:"Larger app",id:"larger-app",level:2},{value:"Define a python function",id:"define-a-python-function",level:3},{value:"Expose the function as an endpoint:",id:"expose-the-function-as-an-endpoint",level:3},{value:"Include the route into app",id:"include-the-route-into-app",level:3},{value:"Serve your app",id:"serve-your-app-1",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"quick-start",children:"Quick Start:"})}),"\n",(0,r.jsx)(n.h2,{id:"simple-app",children:"Simple app"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="app/main.py"',children:"from lihil import Lihil\n\nlhl = Lihil()\n\n@lhl.get\nasync def add_one(a: int, b: int) -> int:\n    return a + b\n"})}),"\n",(0,r.jsx)(n.h3,{id:"serve-your-app",children:"Serve your app"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uvicorn app.main:lhl \n"})}),"\n",(0,r.jsx)(n.h2,{id:"larger-app",children:"Larger app"}),"\n",(0,r.jsx)(n.h3,{id:"define-a-python-function",children:"Define a python function"}),"\n",(0,r.jsx)(n.p,{children:"Let's start by defining a function that creates an user in the database."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="app/users/api.py"',children:"from msgspec import Struct\nfrom sqlalchemy.ext.asyncio import AsyncEngine\nfrom .users.db import user_sql\n\nclass UserDB(UserData):\n    user_id: str\n\ndef get_engine() -> AsyncEngine:\n    return AsyncEngine()\n\nasync def create_user(user: UserData, engine: AsyncEngine) -> UserDB:\n    user_id = str(uuid4())\n    sql = user_sql(user=user, id_=user_id)\n    async with engine.begin() as conn:\n        await conn.execute(sql)\n    return UserDB.from_user(user, id=user_id)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"expose-the-function-as-an-endpoint",children:"Expose the function as an endpoint:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="app/users/api.py"',children:'from lihil import Route\n\nusers_route = Route("/users")\nusers_route.factory(get_engine)\nusers_route.post(create_user)\n'})}),"\n",(0,r.jsx)(n.p,{children:"With just three lines, we:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:'Create a Route with the path "/users".'}),"\n",(0,r.jsxs)(n.li,{children:["Register ",(0,r.jsx)(n.code,{children:"AsyncEngine"})," as a dependency, using ",(0,r.jsx)(n.code,{children:"get_engine"})," as its factory."]}),"\n",(0,r.jsx)(n.li,{children:"Register create_user as the POST endpoint."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"include-the-route-into-app",children:"Include the route into app"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="app/main.py"',children:"from lihil import Lihil\nfrom app.users.api import user_route\n\n\nlihil = Lihil(routes=[user_route])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"serve-your-app-1",children:"Serve your app"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python -m app.main\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);