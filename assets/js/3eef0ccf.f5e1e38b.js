"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[7730],{2167:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Basics/app","title":"create the app","description":"Create app with routes","source":"@site/docs/Basics/app.md","sourceDirName":"Basics","slug":"/Basics/app","permalink":"/docs/Basics/app","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Basics/app.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"create the app"},"sidebar":"tutorialSidebar","previous":{"title":"create a route","permalink":"/docs/Basics/route"},"next":{"title":"websocket","permalink":"/docs/Basics/websocket"}}');var l=i(4848),r=i(8453);const o={sidebar_position:3,title:"create the app"},t=void 0,c={},a=[{value:"Create app with routes",id:"create-app-with-routes",level:2},{value:"Include routes",id:"include-routes",level:2},{value:"Config Your App",id:"config-your-app",level:2},{value:"Serve(run) your app",id:"serverun-your-app",level:2},{value:"Serve with lihil",id:"serve-with-lihil",level:3}];function p(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"create-app-with-routes",children:"Create app with routes"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:'title="app.py"',children:'from lihil import Lihil, Route\n\nuser_route = Route("users")\n\n\nlhl = Lihil[None](routes=[user_route])\n'})}),"\n",(0,l.jsx)(n.h2,{id:"include-routes",children:"Include routes"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'product_route = Route("products")\n\nlhl.include_routes(product_route)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"config-your-app",children:"Config Your App"}),"\n",(0,l.jsx)(n.p,{children:"There are several settings you can change to control the behavior of lihil,"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["config file, e.g: ",(0,l.jsx)(n.code,{children:"pyproject.toml"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'lhl = Lihil(config_file="pyproject.toml")\n'})}),"\n",(0,l.jsxs)(n.p,{children:["This will look for ",(0,l.jsx)(n.code,{children:"tool.lihil"})," table in the ",(0,l.jsx)(n.code,{children:"pyproject.toml"})," file\nextra/unkown keys will be forbidden to help prevent misconfiging"]}),"\n",(0,l.jsx)(n.p,{children:"Note: currently only toml file is supported"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"AppConfig"})," instance"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'lhl = Lihil(app_config=AppConfig(version="0.1.1"))\n'})}),"\n",(0,l.jsx)(n.p,{children:"this is particularly useful if you want to inherit from AppConfig and extend it."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from lihil.config import AppConfig\n\nclass MyConfig(AppConfig):\n    app_name: str\n\nconfig = MyConfig.from_file("myconfig.toml")\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Command line arguments:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-example",children:'python app.py --oas.title "New Title" --is_prod true\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["use ",(0,l.jsx)(n.code,{children:"."})," to express nested fields"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["add ",(0,l.jsx)(n.code,{children:"--help"})," to see available options"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["You can access ",(0,l.jsx)(n.code,{children:"AppConfig"})," anywhere in your app via ",(0,l.jsx)(n.code,{children:"lihil.config.lhl_get_config"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from lihil.config import lhl_get_config, AppConfig\n\napp_config: AppConfig = lhl_get_config()\n"})}),"\n",(0,l.jsx)(n.h2,{id:"serverun-your-app",children:"Serve(run) your app"}),"\n",(0,l.jsx)(n.h3,{id:"serve-with-lihil",children:"Serve with lihil"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from lihil import Lihil\n\n# your application code\n\nlhl = Lihil()\n\nif __name__ == "__main__":\n    lhl.run(__file__)\n'})}),"\n",(0,l.jsx)(n.p,{children:"then in command line"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"uv run python -m myproject.app --server.port=8080\n"})}),"\n",(0,l.jsx)(n.p,{children:"This allows you to override configurations using command-line arguments."}),"\n",(0,l.jsx)(n.p,{children:"If your app is deployed in a containerized environment, such as Kubernetes, providing secrets this way is usually safer than storing them in files."}),"\n",(0,l.jsxs)(n.p,{children:["use ",(0,l.jsx)(n.code,{children:"--help"})," to see available configs."]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var s=i(6540);const l={},r=s.createContext(l);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);