"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[429],{4277:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"http/request/path","title":"path","description":"In an HTTP request, the URL path plays a central role in routing. It\'s how the server knows what resource the client is trying to access. But paths aren\'t just static\u2014they often carry dynamic values known as path parameters.","source":"@site/docs/http/request/path.md","sourceDirName":"http/request","slug":"/http/request/path-parameter","permalink":"/zh/docs/http/request/path-parameter","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"path","slug":"path-parameter"},"sidebar":"tutorialSidebar","previous":{"title":"Request","permalink":"/zh/docs/http/request/"},"next":{"title":"query","permalink":"/zh/docs/http/request/query-parameter"}}');var n=a(74848),i=a(28453);const s={sidebar_position:1,title:"path",slug:"path-parameter"},l="Path Parameters",o={},h=[{value:"What Do Path Parameters Look Like?",id:"what-do-path-parameters-look-like",level:2},{value:"Path Parameters vs Other Request Parameters",id:"path-parameters-vs-other-request-parameters",level:2},{value:"Declare Path Parameters in lihil",id:"declare-path-parameters-in-lihil",level:2},{value:"Implicitly Declare a Path Param",id:"implicitly-declare-a-path-param",level:3},{value:"Explictly Declare a Path Param with <code>lihil.Param</code>",id:"explictly-declare-a-path-param-with-lihilparam",level:3},{value:"Type validation",id:"type-validation",level:2},{value:"Data Validation",id:"data-validation",level:2},{value:"Custom validation",id:"custom-validation",level:2},{value:"Recap",id:"recap",level:2}];function c(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"path-parameters",children:"Path Parameters"})}),"\n",(0,n.jsxs)(t.p,{children:["In an HTTP request, the URL path plays a central role in routing. It's how the server knows ",(0,n.jsx)(t.em,{children:"what resource"})," the client is trying to access. But paths aren't just static\u2014they often carry dynamic values known as ",(0,n.jsx)(t.strong,{children:"path parameters"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"what-do-path-parameters-look-like",children:"What Do Path Parameters Look Like?"}),"\n",(0,n.jsx)(t.p,{children:"A path parameter is a variable part of the URL path. It\u2019s typically used to identify a specific resource. For example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"GET /users/42 HTTP/1.1\nHost: example.com\n"})}),"\n",(0,n.jsx)(t.p,{children:"In this example:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"/users/42 is requesting the user whose ID is 42. The 42 is a path parameter\u2014data embedded directly in the URL structure."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Although we can't be entirely sure about what are the path variables in an url, a restful api usually follows the pattern of"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"/entity_name_in_plural/{entity_id}/sub_entity_name_in_plurals/{sub_entity_id}/..."})}),"\n",(0,n.jsxs)(t.p,{children:["Here, ",(0,n.jsx)(t.code,{children:"users"})," likely refers to the ",(0,n.jsx)(t.code,{children:"User"})," entity, and ",(0,n.jsx)(t.code,{children:"42"})," is the value of its ID."]}),"\n",(0,n.jsx)(t.h2,{id:"path-parameters-vs-other-request-parameters",children:"Path Parameters vs Other Request Parameters"}),"\n",(0,n.jsx)(t.p,{children:"Path parameters carry one-dimensional, fixed values like IDs, slugs, or names\u2014ideal for identifying a single resource."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Location in Request\nPath parameters are part of the URL path itself, embedded directly within the route structure:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-http",children:"GET /users/42 HTTP/1.1\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Encoding Format\nPath parameters are URL-encoded as part of the path segment. Special characters are percent-encoded, but they do not appear after a ?\u2014they are part of the URL hierarchy."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Data Types\nPath parameters represent single, fixed values and support primitive types such as:"}),"\n",(0,n.jsx)(t.p,{children:"str, int, float, bool"}),"\n",(0,n.jsx)(t.p,{children:"Unlike query parameters, path parameters cannot represent arrays or repeated keys. They always carry exactly one value per parameter."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Purpose\nPath parameters typically identify a specific resource or entity by embedding identifiers in the URL path. In contrast, query parameters are used for filtering, pagination, or optional data."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"declare-path-parameters-in-lihil",children:"Declare Path Parameters in lihil"}),"\n",(0,n.jsx)(t.h3,{id:"implicitly-declare-a-path-param",children:"Implicitly Declare a Path Param"}),"\n",(0,n.jsxs)(t.p,{children:["In ",(0,n.jsx)(t.code,{children:"lihil"}),", path parameters are first-class citizens.\nyou can declare path parameters implicitly by including them in the route path and matching function argument names:"]}),"\n",(0,n.jsx)(t.p,{children:"For example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'from lihil import Route\n\nuser = Route("/users/{user_id}")\n\n@user.get\nasync def get_user(user_id: int) -> User:\n    ...\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Here, ",(0,n.jsx)(t.code,{children:"user_id"})," is implicitly declared because it matches the ",(0,n.jsx)(t.code,{children:"{user_id}"})," placeholder in the route path."]}),"\n",(0,n.jsx)(t.p,{children:"lihil automatically extracts and converts it from the URL."}),"\n",(0,n.jsx)(t.p,{children:"For example,\nIf a request like GET /users/42 comes in, lihil:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"extracts 42 from the URL,"}),"\n",(0,n.jsx)(t.li,{children:"converts it to int (based on the type hint),"}),"\n",(0,n.jsx)(t.li,{children:"and passes it to the get_user function."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"You don\u2019t need to parse strings or access the raw request manually\u2014lihil handles it."}),"\n",(0,n.jsxs)(t.h3,{id:"explictly-declare-a-path-param-with-lihilparam",children:["Explictly Declare a Path Param with ",(0,n.jsx)(t.code,{children:"lihil.Param"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'from lihil import Route, Param\nfrom typing import Annotated\n\nPositiveInt = Annotated[int, Param(gt=0)]\n\nuser = Route("/users/{user_id}")\n\n@user.get\nasync def get_user(user_id: PositiveInt) -> User:\n    ...\n'})}),"\n",(0,n.jsx)(t.h2,{id:"type-validation",children:"Type validation"}),"\n",(0,n.jsxs)(t.p,{children:["Path parameters are validated based on their type hints. If you declare a path parameter as an ",(0,n.jsx)(t.code,{children:"int"}),", lihil will automatically convert it to an integer. If the conversion fails, lihil will return a 422 Invalid Request error."]}),"\n",(0,n.jsx)(t.p,{children:"If a union of types is provided, lihil will try to convert the value to each type in the union until one succeeds. If none succeed, a 422 error is returned."}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsxs)(t.p,{children:["If a union contains str or bytes, the conversion will always succeed, as these types can represent any value. This means that if you have a union like ",(0,n.jsx)(t.code,{children:"Union[int, str]"}),", the path parameter will always be treated as a string."]})}),"\n",(0,n.jsx)(t.h2,{id:"data-validation",children:"Data Validation"}),"\n",(0,n.jsxs)(t.p,{children:["You might also want to validate the value of the path parameter. For example, if you want to ensure that the user ID is positive, you can set such constraints using ",(0,n.jsx)(t.code,{children:"lihil.Param"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'from lihil import Route, Param\n\nPositiveInt = Param(gt=0)\n\nuser = Route("/users/{user_id}")\n\n@user.get\nasync def get_user(user_id: PositiveInt) -> User: ...\n'})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"lihil.Param"})," allows you to set various constraints on the path parameter, such as minimum and maximum values, regex patterns, and more. This is particularly useful for ensuring that the data you receive is valid before processing it."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"lihil.Param"})," uses ",(0,n.jsx)(t.code,{children:"msgspec.Meta"})," under the hood, so you can use all the features of ",(0,n.jsx)(t.code,{children:"msgspec.Meta"})," to validate your path parameters."]}),"\n",(0,n.jsx)(t.h2,{id:"custom-validation",children:"Custom validation"}),"\n",(0,n.jsx)(t.p,{children:"You can also create custom validators for path parameters. This is useful when you have complex validation logic that can't be expressed with simple constraints."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'from lihil import Route, Param, HTTPException\n\n\nclass MyError(HTTPException[T]):\n    "I don\'t like this value"\n\n\ndef decoder(value: str) -> int:\n    # Custom decoding logic\n    if value == "42":\n        raise MyError("I don\'t like this value")\n    return int(value)\n\nasync def create_user(user_id: int, user_age: Annotated[int, Param(decoder=decoder)]) -> User:\n    # Your logic here\n    pass\n'})}),"\n",(0,n.jsx)(t.h2,{id:"recap",children:"Recap"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Path parameters are embedded directly in the URL path and identify specific resources."}),"\n",(0,n.jsx)(t.li,{children:"They carry exactly one value per parameter and support primitive types like int, str, and bool."}),"\n",(0,n.jsx)(t.li,{children:"In lihil, you can declare path parameters implicitly in the route path or explicitly with Param for validation and constraints."}),"\n",(0,n.jsx)(t.li,{children:"Custom decoders allow you to implement advanced validation and error handling for path parameters."}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>l});var r=a(96540);const n={},i=r.createContext(n);function s(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);