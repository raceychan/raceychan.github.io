"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[369],{11724:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"http/request/form","title":"\u8868\u5355\u53c2\u6570","description":"\u8868\u5355\u6570\u636e\u662f\u53d1\u9001\u8bf7\u6c42\u4f53\u6570\u636e\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u2014\u2014\u901a\u5e38\u7528\u4e8e HTML \u8868\u5355\u548c\u6587\u4ef6\u4e0a\u4f20\u3002\u4e0e JSON \u4e0d\u540c\uff0c\u8868\u5355\u6570\u636e\u4f7f\u7528 application/x-www-form-urlencoded \u6216 multipart/form-data \u5185\u5bb9\u7c7b\u578b\u7f16\u7801\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/http/request/form.md","sourceDirName":"http/request","slug":"/http/request/from-data","permalink":"/zh/docs/http/request/from-data","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4.1,"frontMatter":{"sidebar_position":4.1,"title":"\u8868\u5355\u53c2\u6570","slug":"from-data"},"sidebar":"tutorialSidebar","previous":{"title":"\u8bf7\u6c42\u4f53\u53c2\u6570","permalink":"/zh/docs/http/request/body-parameter"},"next":{"title":"\u7aef\u70b9","permalink":"/zh/docs/http/endpoint"}}');var o=t(74848),i=t(28453);const s={sidebar_position:4.1,title:"\u8868\u5355\u53c2\u6570",slug:"from-data"},l="\u8868\u5355\u53c2\u6570",a={},d=[{value:"\u58f0\u660e\u8868\u5355\u53c2\u6570",id:"\u58f0\u660e\u8868\u5355\u53c2\u6570",level:2},{value:"\u5904\u7406\u6587\u4ef6\u4e0a\u4f20",id:"\u5904\u7406\u6587\u4ef6\u4e0a\u4f20",level:2},{value:"\u9ad8\u7ea7\uff1a\u6587\u4ef6\u7ea6\u675f",id:"\u9ad8\u7ea7\u6587\u4ef6\u7ea6\u675f",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\u8868\u5355\u53c2\u6570",children:"\u8868\u5355\u53c2\u6570"})}),"\n",(0,o.jsxs)(n.p,{children:["\u8868\u5355\u6570\u636e\u662f\u53d1\u9001\u8bf7\u6c42\u4f53\u6570\u636e\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u2014\u2014\u901a\u5e38\u7528\u4e8e HTML \u8868\u5355\u548c\u6587\u4ef6\u4e0a\u4f20\u3002\u4e0e JSON \u4e0d\u540c\uff0c\u8868\u5355\u6570\u636e\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"application/x-www-form-urlencoded"})," \u6216 ",(0,o.jsx)(n.code,{children:"multipart/form-data"})," \u5185\u5bb9\u7c7b\u578b\u7f16\u7801\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"lihil"})," \u652f\u6301\u8868\u5355\u89e3\u6790\uff0c\u4f60\u53ef\u4ee5\u63d0\u53d6\u8868\u5355\u503c\u548c\u4e0a\u4f20\u7684\u6587\u4ef6\u3002"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"\u58f0\u660e\u8868\u5355\u53c2\u6570",children:"\u58f0\u660e\u8868\u5355\u53c2\u6570"}),"\n",(0,o.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"Annotated[T, Form()]"})," \u58f0\u660e\u8868\u5355\u53c2\u6570\u3002",(0,o.jsx)(n.code,{children:"lihil"})," \u5c06\u81ea\u52a8\u89e3\u6790\u8bf7\u6c42\u4f53\u5e76\u4e3a\u4f60\u63d0\u53d6\u8868\u5355\u5b57\u6bb5\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from lihil import Route, Form, Struct\nfrom typing import Annotated\n\nlogin = Route("/login")\n\nclass LoginForm(Struct):\n    username: str\n    password: str\n\n@login.post\nasync def handle_login(\n    loginform: Annotated[LoginForm, Form()]\n) -> str:\n    return f"Welcome {username}"\n'})}),"\n",(0,o.jsx)(n.p,{children:"form() \u52a9\u624b\u5c06\u53c2\u6570\u6807\u8bb0\u4e3a\u6765\u81ea\u8868\u5355\u8bf7\u6c42\u4f53\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u5904\u7406\u6587\u4ef6\u4e0a\u4f20",children:"\u5904\u7406\u6587\u4ef6\u4e0a\u4f20"}),"\n",(0,o.jsx)(n.p,{children:"\u8868\u5355\u6570\u636e\u8fd8\u652f\u6301\u6587\u4ef6\u4e0a\u4f20\uff08\u5f53\u5185\u5bb9\u7c7b\u578b\u4e3a multipart/form-data \u65f6\uff09\u3002\u4f60\u53ef\u4ee5\u5c06\u4e0a\u4f20\u7684\u6587\u4ef6\u58f0\u660e\u4e3a\u53c2\u6570\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from lihil import form, UploadFile\nfrom typing import Annotated\n\n@user.post\nasync def upload_avatar(file: UploadFile) -> str:\n    return file.filename\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u9ad8\u7ea7\u6587\u4ef6\u7ea6\u675f",children:"\u9ad8\u7ea7\uff1a\u6587\u4ef6\u7ea6\u675f"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u89e3\u6790\u5927\u578b\u8868\u5355\u6216\u5904\u7406\u7528\u6237\u4e0a\u4f20\u65f6\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u8bbe\u7f6e\u9650\u5236\u6765\u4fdd\u62a4\u4f60\u7684\u670d\u52a1\u5668\u3002form() \u52a9\u624b\u63a5\u53d7\u5982\u4e0b\u9009\u9879\uff1a"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"max_files: \u6700\u5927\u6587\u4ef6\u6570\u91cf"}),"\n",(0,o.jsx)(n.li,{children:"max_fields: \u6700\u5927\u603b\u5b57\u6bb5\u6570\u91cf"}),"\n",(0,o.jsx)(n.li,{children:"max_part_size: \u4efb\u4f55\u90e8\u5206\u7684\u6700\u5927\u5927\u5c0f\uff08\u9ed8\u8ba4\uff1a1MB\uff09"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"@user.post\nasync def upload_many(\n    files: Annotated[list[UploadFile], Form(max_files=5, max_part_size=2 * 1024 * 1024)]\n) -> int:\n    return len(files)\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8868\u5355\u6570\u636e\u53ea\u662f\u53e6\u4e00\u79cd\u8bf7\u6c42\u4f53\u6570\u636e\uff0c\u6839\u636e\u5185\u5bb9\u7c7b\u578b\u8fdb\u884c\u4e0d\u540c\u7684\u89e3\u6790\u3002\u4f7f\u7528 lihil\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Annotated[..., Form()] \u58f0\u660e\u8868\u5355\u53c2\u6570\uff0c\u5e76\u5b8c\u5168\u63a7\u5236\u6587\u4ef6\u5904\u7406\u3001\u5b57\u6bb5\u9650\u5236\u548c\u6d41\u4f20\u8f93\u2014\u2014\u6240\u6709\u8fd9\u4e9b\u90fd\u4f7f\u7528\u719f\u6089\u7684 Python \u7c7b\u578b\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(96540);const o={},i=r.createContext(o);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);