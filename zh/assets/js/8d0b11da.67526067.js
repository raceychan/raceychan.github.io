"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[1210],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var r=i(96540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}},66165:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"index","title":"\u5feb\u901f\u5f00\u59cb","description":"Hello World","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/index.md","sourceDirName":".","slug":"/","permalink":"/zh/docs/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"\u5feb\u901f\u5f00\u59cb","sidebar_position":1,"slug":"/"},"sidebar":"tutorialSidebar","next":{"title":"\u5b89\u88c5","permalink":"/zh/docs/installation"}}');var s=i(74848),l=i(28453);const t={title:"\u5feb\u901f\u5f00\u59cb",sidebar_position:1,slug:"/"},o="\u5feb\u901f\u5f00\u59cb",a={},c=[{value:"Hello World",id:"hello-world",level:2},{value:"\u4f7f\u7528 uvicorn \u542f\u52a8\u5e94\u7528",id:"\u4f7f\u7528-uvicorn-\u542f\u52a8\u5e94\u7528",level:3},{value:"\u66f4\u5927\u7684\u5e94\u7528",id:"\u66f4\u5927\u7684\u5e94\u7528",level:2},{value:"\u5b9a\u4e49 Python \u51fd\u6570",id:"\u5b9a\u4e49-python-\u51fd\u6570",level:3},{value:"\u5c06\u51fd\u6570\u66b4\u9732\u4e3a\u7aef\u70b9",id:"\u5c06\u51fd\u6570\u66b4\u9732\u4e3a\u7aef\u70b9",level:3},{value:"\u5c06\u8def\u7531\u5305\u542b\u5230\u5e94\u7528\u4e2d",id:"\u5c06\u8def\u7531\u5305\u542b\u5230\u5e94\u7528\u4e2d",level:3},{value:"\u4f7f\u7528 lihil \u542f\u52a8\u5e94\u7528",id:"\u4f7f\u7528-lihil-\u542f\u52a8\u5e94\u7528",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"})}),"\n",(0,s.jsx)(n.h2,{id:"hello-world",children:"Hello World"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="app/main.py"',children:'from lihil import Lihil, Text, Annotated\n\nlhl = Lihil()\n\n@lhl.get\ndef hello(world: str = "world") -> Annotated[Text, 200]:\n    return f"hello, {world}!"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-uvicorn-\u542f\u52a8\u5e94\u7528",children:"\u4f7f\u7528 uvicorn \u542f\u52a8\u5e94\u7528"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"uvicorn app.main:lhl\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u66f4\u5927\u7684\u5e94\u7528",children:"\u66f4\u5927\u7684\u5e94\u7528"}),"\n",(0,s.jsx)(n.h3,{id:"\u5b9a\u4e49-python-\u51fd\u6570",children:"\u5b9a\u4e49 Python \u51fd\u6570"}),"\n",(0,s.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u4ece\u5b9a\u4e49\u4e00\u4e2a\u5728\u6570\u636e\u5e93\u4e2d\u521b\u5efa\u7528\u6237\u7684\u51fd\u6570\u5f00\u59cb\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="app/users/api.py"',children:"from msgspec import Struct\nfrom sqlalchemy.ext.asyncio import AsyncEngine\nfrom .users.db import user_sql\n\nclass UserDB(UserData):\n    user_id: str\n\ndef get_engine() -> AsyncEngine:\n    return AsyncEngine()\n\nasync def create_user(user: UserData, engine: AsyncEngine) -> UserDB:\n    user_id = str(uuid4())\n    sql = user_sql(user=user, id_=user_id)\n    async with engine.begin() as conn:\n        await conn.execute(sql)\n    return UserDB.from_user(user, id=user_id)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5c06\u51fd\u6570\u66b4\u9732\u4e3a\u7aef\u70b9",children:"\u5c06\u51fd\u6570\u66b4\u9732\u4e3a\u7aef\u70b9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="app/users/api.py"',children:'from lihil import Route\n\nusers_route = Route("/users")\nusers_route.factory(get_engine)\nusers_route.post(create_user)\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u4ec5\u7528\u4e09\u884c\u4ee3\u7801\uff0c\u6211\u4eec\u5c31\u5b9e\u73b0\u4e86\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'\u521b\u5efa\u4e00\u4e2a\u8def\u5f84\u4e3a "/users" \u7684\u8def\u7531\u3002'}),"\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"get_engine"})," \u4f5c\u4e3a\u5de5\u5382\u51fd\u6570\u6ce8\u518c ",(0,s.jsx)(n.code,{children:"AsyncEngine"})," \u4f9d\u8d56\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u5c06 create_user \u6ce8\u518c\u4e3a POST \u7aef\u70b9\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5c06\u8def\u7531\u5305\u542b\u5230\u5e94\u7528\u4e2d",children:"\u5c06\u8def\u7531\u5305\u542b\u5230\u5e94\u7528\u4e2d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="app/main.py"',children:'from lihil import Lihil\nfrom app.users.api import user_route\n\n\nlihil = Lihil(user_route)\n\nif __name__ == "__main__":\n    lihil.run(__file__)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-lihil-\u542f\u52a8\u5e94\u7528",children:"\u4f7f\u7528 lihil \u542f\u52a8\u5e94\u7528"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python -m app.main\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);